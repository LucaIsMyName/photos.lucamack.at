import{c as k,r as b,s as C,b as x,j as a,L as D,u as M,d as O,g as f,e as U,C as g,p as F}from"./index-B6yCDvO7.js";import{k as A}from"./marked.esm-DJbTXz-_.js";import{I as E}from"./Image-BxluBe-R.js";import{C as P}from"./CopyButton-Btp7Q7Bh.js";import G from"./NotFound-Bev_2yZK.js";import{S as L}from"./SeoHead-Dje7qPOW.js";import"./mapbox-gl-CNTiHEyl.js";import"./check-CJvxkudQ.js";import"./Href-CmTVzh9N.js";const H=w=>{const e=k.c(19),{alt:t,gallerySlug:r,imageFilename:o}=w,[i,n]=b.useState(null);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s=u=>{u.width>u.height?n("landscape"):u.height>u.width?n("portrait"):n("square")},e[0]=s):s=e[0];const c=s;let l;e[1]!==i?(l=()=>{if(!i)return"w-full md:w-1/2 flex-grow-1 max-w-[calc(var(--content-width)/1.5)]";switch(i){case"landscape":return"w-full md:w-full";case"portrait":case"square":default:return"w-full md:w-1/2 flex-grow-1 max-w-[calc(var(--content-width)/1.5)]"}},e[1]=i,e[2]=l):l=e[2];const T=l,j=i==="landscape"?"(min-width: 1024px) 1024px, 100vw":"(min-width: 1024px) 512px, (min-width: 768px) 50vw, 100vw",$=o.replace(/\.[^/.]+$/,""),y=`/gallery/${r}/image/${C($)}`,S=`${C($)}`,v=T(),I=`Link zum Foto: ${t}`;let m;e[3]!==r||e[4]!==o?(m=x(r,o),e[3]=r,e[4]=o,e[5]=m):m=e[5];const N=i==="landscape"?427:i==="portrait"?960:640;let d;e[6]!==t||e[7]!==j||e[8]!==m||e[9]!==N?(d=a.jsx(E,{src:m,alt:t,width:640,height:N,onImageLoad:c,sizes:j,loading:"lazy",className:"w-full h-auto block"}),e[6]=t,e[7]=j,e[8]=m,e[9]=N,e[10]=d):d=e[10];let p;e[11]!==y||e[12]!==I||e[13]!==d?(p=a.jsx("div",{className:"p-0 pr-0 lg:pr-4 sm:pb-4 md:pr-4 md:py-6",children:a.jsx(D,{title:I,to:y,className:"block",children:d})}),e[11]=y,e[12]=I,e[13]=d,e[14]=p):p=e[14];let h;return e[15]!==S||e[16]!==v||e[17]!==p?(h=a.jsx("div",{id:S,className:v,children:p}),e[15]=S,e[16]=v,e[17]=p,e[18]=h):h=e[18],h},X=()=>{const{theme:w}=M(),{slug:e}=O(),t=f.find(i=>i.slug===e),r=U(),o=b.useMemo(()=>t?.images?[...t.images].sort(()=>Math.random()-.5):[],[t]);return b.useEffect(()=>{let n=new URLSearchParams(r.search).get("image");if(!n&&r.hash){const s=r.hash.substring(1);n=s.startsWith("image-")?s.replace("image-",""):s}if(n){const s=`image-${n.split(".")[0]}`;setTimeout(()=>{const c=document.getElementById(s);c&&c.scrollIntoView({behavior:"smooth",block:"center"})},150)}if(t&&t.images){const s=document.createElement("script");s.type="application/ld+json",s.id="gallery-structured-data";const c=t.images.filter(l=>l.latitude&&l.longitude).map(l=>({"@context":"https://schema.org","@type":"ImageObject",name:l.filename.replaceAll("_"," ").replace(".jpg","").trim(),description:`A photo from the gallery: ${t.title}`,contentUrl:`${g.url}${x(t.slug,encodeURI(l.filename.replaceAll(" ","_")),"original")}`,width:"1920",height:"1080",datePublished:l.createDate?F(l.createDate)?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]:new Date().toISOString().split("T")[0],dateCreated:l.createDate?F(l.createDate)?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]:new Date().toISOString().split("T")[0],author:{"@type":"Person",name:g.author,url:g.url},copyrightHolder:{"@type":"Person",name:g.author},license:"https://creativecommons.org/licenses/by-nc/4.0/",geo:{"@type":"GeoCoordinates",latitude:l.latitude,longitude:l.longitude},...l.googleMapsUrl&&{sameAs:l.googleMapsUrl}}));return s.innerHTML=JSON.stringify(c),document.head.appendChild(s),()=>{const l=document.getElementById("gallery-structured-data");l&&document.head.removeChild(l)}}},[r,t]),t?a.jsxs("div",{children:[a.jsx(L,{title:`Fotoserie: ${t.title||t.name} | ${g.author}`,description:t.description||`Fotoserie: ${t.title||t.name}.`,imageUrl:window.location.origin+x(t.slug,t.images[Math.floor(Math.random()*t.images.length)].filename)}),a.jsxs("div",{className:"px-4  md:pl-8 md:px-0",children:[a.jsxs("div",{className:"flex flex-col items-start",children:[a.jsx("h1",{className:`${g.theme.headline.one} w-full max-w-[calc(var(--content-width)/(21/13))] text-wrap-balance md:pt-8 pt-6 pb-4  `,children:t.title||t.name}),t.description&&a.jsx("div",{className:"w-full max-w-[calc(var(--content-width)/(21/13))] text-wrap-balance text-sm md:text-lg leading-8 my-4 pb-4 leading-tight",dangerouslySetInnerHTML:{__html:A(t.description)}})]}),o.length>0?a.jsx("div",{className:"md:max-w-[calc(var(--content-width))] lg:pr-4 flex flex-wrap justify-center items-center gap-8 md:gap-0 pb-4",children:o.map(i=>a.jsx(H,{alt:`${i.filename.replaceAll("_"," ").replace(".jpg","").trim()}`,gallerySlug:t.slug,imageFilename:i.filename},i.filename))}):a.jsx("p",{className:"text-left",children:"Keine Fotos in der Serie gefunden"}),a.jsxs("div",{className:"md:max-w-[calc(var(--content-width))] w-full gap-4 my-8 py-8 flex flex-col justify-between items-center text-sm",children:[t.timeframe||t.imageCount?a.jsxs("div",{className:"text-left flex justify-center gap-4 w-full",children:[t.timeframe?a.jsxs("p",{children:[t.timeframe," "]}):a.jsx("p",{children:"N/A"})," | ",t.imageCount?a.jsxs("p",{children:[t.imageCount," Fotos"]}):a.jsx("p",{children:"N/A"})]}):null,a.jsx("div",{className:"flex justify-center",children:a.jsx(P,{textToCopy:window.location.href,children:a.jsx("span",{className:`font-mono ${w==="dark"?"text-white":"text-black"}`,children:"Link Kopieren"})})})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(L,{title:"Fotoserie nicht gefunden",description:"Fotoserie nicht gefunden",imageUrl:x(f[0].slug,f[0].images[Math.floor(Math.random()*f[0].images.length)].filename)}),a.jsx(G,{})]})};export{X as default};
