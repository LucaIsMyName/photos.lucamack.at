import{r as b,c as K,u as P,b as Q,a as q,j as z}from"./index-CFRpoMGz.js";var D=new Map,M=new WeakMap,G=0,X=void 0;function Y(t){return t?(M.has(t)||(G+=1,M.set(t,G.toString())),M.get(t)):"0"}function Z(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?Y(t.root):t[e]}`).toString()}function k(t){const e=Z(t);let o=D.get(e);if(!o){const r=new Map;let v;const a=new IntersectionObserver(n=>{n.forEach(s=>{var i;const m=s.isIntersecting&&v.some(c=>s.intersectionRatio>=c);t.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=m),(i=r.get(s.target))==null||i.forEach(c=>{c(m,s)})})},t);v=a.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),o={id:e,observer:a,elements:r},D.set(e,o)}return o}function ee(t,e,o={},r=X){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const i=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:typeof o.threshold=="number"?o.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:v,observer:a,elements:n}=k(o),s=n.get(t)||[];return n.has(t)||n.set(t,s),s.push(e),a.observe(t),function(){s.splice(s.indexOf(e),1),s.length===0&&(n.delete(t),a.unobserve(t)),n.size===0&&(a.disconnect(),D.delete(v))}}function te({threshold:t,delay:e,trackVisibility:o,rootMargin:r,root:v,triggerOnce:a,skip:n,initialInView:s,fallbackInView:i,onChange:m}={}){var c;const[d,E]=b.useState(null),R=b.useRef(m),[y,f]=b.useState({inView:!!s,entry:void 0});R.current=m,b.useEffect(()=>{if(n||!d)return;let h;return h=ee(d,(_,$)=>{f({inView:_,entry:$}),R.current&&R.current(_,$),$.isIntersecting&&a&&h&&(h(),h=void 0)},{root:v,rootMargin:r,threshold:t,trackVisibility:o,delay:e},i),()=>{h&&h()}},[Array.isArray(t)?t.toString():t,d,v,r,a,n,o,i,e]);const w=(c=y.entry)==null?void 0:c.target,I=b.useRef(void 0);!d&&w&&!a&&!n&&I.current!==w&&(I.current=w,f({inView:!!s,entry:void 0}));const p=[E,y.inView,y.entry];return p.ref=p[0],p.inView=p[1],p.entry=p[2],p}const se=[380,640,1440],ie=t=>{const e=K.c(44),{id:o,src:r,loading:v,alt:a,className:n,style:s,onImageLoad:i,sizes:m,width:c,height:d}=t,E=o===void 0?"":o,{theme:R}=P();let y;e[0]===Symbol.for("react.memo_cache_sentinel")?(y={triggerOnce:!0,threshold:.1},e[0]=y):y=e[0];const{ref:f,inView:w}=te(y),[I,p]=b.useState(null),[h,_]=b.useState(null),[$,J]=b.useState(!1);let A;if(e[1]!==r){const l=r.split("/").pop()||"",u=r.split("/")[3];A=se.map(g=>`${Q(u,l.replaceAll(" ","_"),g)} ${g}w`).join(", "),e[1]=r,e[2]=A}else A=e[2];const B=A;let T,L;if(e[3]!==w||e[4]!==r?(T=()=>w?((async()=>{try{p(r)}catch(u){console.error("Image loading or conversion failed:",u),_("Failed to load image.")}})(),re):void 0,L=[r,w],e[3]=w,e[4]=r,e[5]=T,e[6]=L):(T=e[5],L=e[6]),b.useEffect(T,L),h){const l=R==="dark"?"text-white":"text-black";let u;e[7]!==l?(u=q("w-full aspect-[4/3] flex items-center justify-center bg-neutral-500/20",l),e[7]=l,e[8]=u):u=e[8];let g;return e[9]!==h||e[10]!==f||e[11]!==u?(g=z.jsx("div",{ref:f,className:u,children:h}),e[9]=h,e[10]=f,e[11]=u,e[12]=g):g=e[12],g}let N;e[13]!==i?(N=l=>{J(!0),i&&i({width:l.currentTarget.naturalWidth,height:l.currentTarget.naturalHeight})},e[13]=i,e[14]=N):N=e[14];const W=N;if(!I){let l;e[15]!==d||e[16]!==c?(l=c&&d?{aspectRatio:`${c} / ${d}`}:{aspectRatio:"4 / 3"},e[15]=d,e[16]=c,e[17]=l):l=e[17];const u=l,g=`w-full h-auto ${R==="dark"?"bg-white/10":"bg-black/10"}`;let j;e[18]!==g?(j=q(g),e[18]=g,e[19]=j):j=e[19];let U;return e[20]!==u||e[21]!==f||e[22]!==j?(U=z.jsx("div",{ref:f,style:u,className:j}),e[20]=u,e[21]=f,e[22]=j,e[23]=U):U=e[23],U}let V;e[24]!==I?(V=I.replaceAll(" ","_"),e[24]=I,e[25]=V):V=e[25];const C=encodeURI(V),F=v!==void 0?v:"lazy",H=`transition-opacity duration-300 ease-in ${$?"opacity-100":"opacity-0"}`;let S;e[26]!==n||e[27]!==H?(S=q(H,n),e[26]=n,e[27]=H,e[28]=S):S=e[28];let x;e[29]!==a||e[30]!==W||e[31]!==d||e[32]!==E||e[33]!==m||e[34]!==B||e[35]!==s||e[36]!==S||e[37]!==C||e[38]!==F||e[39]!==c?(x=z.jsx("img",{id:E,src:C,srcSet:B,sizes:m,alt:a,width:c,height:d,loading:F,className:S,style:s,onLoad:W}),e[29]=a,e[30]=W,e[31]=d,e[32]=E,e[33]=m,e[34]=B,e[35]=s,e[36]=S,e[37]=C,e[38]=F,e[39]=c,e[40]=x):x=e[40];let O;return e[41]!==f||e[42]!==x?(O=z.jsx("div",{ref:f,className:"w-full h-full",children:x}),e[41]=f,e[42]=x,e[43]=O):O=e[43],O};function re(){}export{ie as I};
