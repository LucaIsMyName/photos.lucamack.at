import{r as h,c as D,b as G,j as z}from"./index-CedDT628.js";import{g as J}from"./image-CpkqAB9L.js";import{c as K}from"./cn-CBfrqCZ4.js";var F=new Map,M=new WeakMap,H=0,P=void 0;function Q(t){return t?(M.has(t)||(H+=1,M.set(t,H.toString())),M.get(t)):"0"}function X(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?Q(t.root):t[e]}`).toString()}function Y(t){const e=X(t);let o=F.get(e);if(!o){const s=new Map;let g;const a=new IntersectionObserver(l=>{l.forEach(r=>{var n;const m=r.isIntersecting&&g.some(c=>r.intersectionRatio>=c);t.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=m),(n=s.get(r.target))==null||n.forEach(c=>{c(m,r)})})},t);g=a.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),o={id:e,observer:a,elements:s},F.set(e,o)}return o}function Z(t,e,o={},s=P){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const n=t.getBoundingClientRect();return e(s,{isIntersecting:s,target:t,intersectionRatio:typeof o.threshold=="number"?o.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:g,observer:a,elements:l}=Y(o),r=l.get(t)||[];return l.has(t)||l.set(t,r),r.push(e),a.observe(t),function(){r.splice(r.indexOf(e),1),r.length===0&&(l.delete(t),a.unobserve(t)),l.size===0&&(a.disconnect(),F.delete(g))}}function k({threshold:t,delay:e,trackVisibility:o,rootMargin:s,root:g,triggerOnce:a,skip:l,initialInView:r,fallbackInView:n,onChange:m}={}){var c;const[u,$]=h.useState(null),j=h.useRef(m),[p,d]=h.useState({inView:!!r,entry:void 0});j.current=m,h.useEffect(()=>{if(l||!u)return;let f;return f=Z(u,(_,E)=>{d({inView:_,entry:E}),j.current&&j.current(_,E),E.isIntersecting&&a&&f&&(f(),f=void 0)},{root:g,rootMargin:s,threshold:t,trackVisibility:o,delay:e},n),()=>{f&&f()}},[Array.isArray(t)?t.toString():t,u,g,s,a,l,o,n,e]);const b=(c=p.entry)==null?void 0:c.target,y=h.useRef(void 0);!u&&b&&!a&&!l&&y.current!==b&&(y.current=b,d({inView:!!r,entry:void 0}));const v=[$,p.inView,p.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}const ee=[380,640,1440],ie=t=>{const e=D.c(38),{id:o,src:s,loading:g,alt:a,className:l,style:r,onImageLoad:n,sizes:m,width:c,height:u}=t,$=o===void 0?"":o,{theme:j}=G();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={triggerOnce:!0,threshold:.1},e[0]=p):p=e[0];const{ref:d,inView:b}=k(p),[y,v]=h.useState(null),[f,_]=h.useState(null),[E,q]=h.useState(!1);let A;if(e[1]!==s){const i=s.split("/").pop()||"",w=s.split("/")[3];A=ee.map(I=>`${J(w,i.replaceAll(" ","_"),I)} ${I}w`).join(", "),e[1]=s,e[2]=A}else A=e[2];const U=A;let T,L;if(e[3]!==b||e[4]!==s?(T=()=>b?((async()=>{try{v(s)}catch(w){console.error("Image loading or conversion failed:",w),_("Failed to load image.")}})(),te):void 0,L=[s,b],e[3]=b,e[4]=s,e[5]=T,e[6]=L):(T=e[5],L=e[6]),h.useEffect(T,L),f){let i;return e[7]!==f||e[8]!==d?(i=z.jsx("div",{ref:d,className:"w-full aspect-[4/3] flex items-center justify-center bg-gray-200 text-red-500 font-medium",children:f}),e[7]=f,e[8]=d,e[9]=i):i=e[9],i}let N;e[10]!==n?(N=i=>{q(!0),n&&n({width:i.currentTarget.naturalWidth,height:i.currentTarget.naturalHeight})},e[10]=n,e[11]=N):N=e[11];const B=N;if(!y){let i;e[12]!==u||e[13]!==c?(i=c&&u?{aspectRatio:`${c} / ${u}`}:{aspectRatio:"4 / 3"},e[12]=u,e[13]=c,e[14]=i):i=e[14];const w=i,I=`w-full h-auto ${j==="dark"?"bg-white/10":"bg-black/10"}`;let x;e[15]!==I?(x=K(I),e[15]=I,e[16]=x):x=e[16];let O;return e[17]!==w||e[18]!==d||e[19]!==x?(O=z.jsx("div",{ref:d,style:w,className:x}),e[17]=w,e[18]=d,e[19]=x,e[20]=O):O=e[20],O}let R;e[21]!==y?(R=y.replaceAll(" ","_"),e[21]=y,e[22]=R):R=e[22];const W=g!==void 0?g:"lazy",C=`${l} transition-opacity duration-300 ease-in ${E?"opacity-100":"opacity-0"}`;let S;e[23]!==a||e[24]!==B||e[25]!==u||e[26]!==$||e[27]!==m||e[28]!==U||e[29]!==r||e[30]!==R||e[31]!==W||e[32]!==C||e[33]!==c?(S=z.jsx("img",{id:$,src:R,srcSet:U,sizes:m,alt:a,width:c,height:u,loading:W,className:C,style:r,onLoad:B}),e[23]=a,e[24]=B,e[25]=u,e[26]=$,e[27]=m,e[28]=U,e[29]=r,e[30]=R,e[31]=W,e[32]=C,e[33]=c,e[34]=S):S=e[34];let V;return e[35]!==d||e[36]!==S?(V=z.jsx("div",{ref:d,className:"w-full h-full",children:S}),e[35]=d,e[36]=S,e[37]=V):V=e[37],V};function te(){}export{ie as I};
