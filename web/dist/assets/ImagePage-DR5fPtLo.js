import{d as _,u as D,r as N,g as A,c as T,b as C,j as e,L as $}from"./index-D7wVJfO7.js";import{M as S,a as L}from"./scale-control-h_QGUS_9.js";import{C as r}from"./config-BUEk0qKv.js";import{c as d}from"./cn-CBfrqCZ4.js";import{I as P}from"./Image-DKs09G9J.js";import{g as i}from"./image-CpkqAB9L.js";import{p as k}from"./date-RcxNdlrM.js";import{C as z}from"./check-Bnif3_XX.js";import{H as j}from"./Href-C_pH0p3M.js";import"./mapbox-gl-CNTiHEyl.js";import"./index-XtNynd92.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],q=_("copy",U),E=()=>{const{imageName:m}=D();return N.useMemo(()=>{if(m)for(const t of A){const a=t.images?.find(p=>p.filename.replace(/\.[^/.]+$/,"")===m);if(a)return{image:a,gallery:t}}},[m])},y=m=>{const l=T.c(11),{textToCopy:t,className:a}=m,[p,s]=N.useState(!1),{theme:x}=C();let o;l[0]!==t?(o=async()=>{try{await navigator.clipboard.writeText(t),s(!0),setTimeout(()=>s(!1),2e3)}catch(n){console.error("Failed to copy text: ",n)}},l[0]=t,l[1]=o):o=l[1];const g=o;let u;l[2]!==a?(u=d("p-1 bg-transparent",a),l[2]=a,l[3]=u):u=l[3];let h;l[4]!==p||l[5]!==x?(h=p?e.jsx(z,{size:16,strokeWidth:2,className:d(x==="dark"?"text-red-300":"text-red-600")}):e.jsx(q,{className:d(x==="dark"?"text-red-300":"text-red-600"),size:16}),l[4]=p,l[5]=x,l[6]=h):h=l[6];let c;return l[7]!==g||l[8]!==u||l[9]!==h?(c=e.jsx("button",{onClick:g,className:u,"aria-label":"Copy to clipboard",children:h}),l[7]=g,l[8]=u,l[9]=h,l[10]=c):c=l[10],c},Y=()=>{const{theme:m}=C(),l=E();if(N.useEffect(()=>{if(l){const{image:s,gallery:x}=l,o=document.createElement("script");o.type="application/ld+json",o.id="image-structured-data";const g={"@context":"https://schema.org","@type":"ImageObject",name:s.filename,description:s.alt||`A photo from the gallery: ${x.title}`,contentUrl:`${r.url}${i(x.slug,encodeURI(s.filename.replaceAll(" ","_")),"original")}`,author:{"@type":"Person",name:r.meta.title},...s.latitude&&s.longitude&&{location:{"@type":"Place",geo:{"@type":"GeoCoordinates",latitude:s.latitude,longitude:s.longitude},...s.googleMapsUrl&&{sameAs:s.googleMapsUrl}}}};return o.innerHTML=JSON.stringify(g),document.head.appendChild(o),()=>{const u=document.getElementById("image-structured-data");u&&document.head.removeChild(u)}}},[l]),!l)return e.jsx("div",{className:"py-10 text-left",children:"Bild nicht gefunden."});const{image:t,gallery:a}=l,p=N.useMemo(()=>{if(!l)return[];const{image:s,gallery:x}=l;let o=x.images.filter(c=>c.filename!==s.filename).map(c=>({...c,gallerySlug:x.slug}));if(o.length>=6)return o.slice(0,6);let g=[];if(s.latitude&&s.longitude){const c=(n,f,v,I)=>{const w=(v-n)*(Math.PI/180),b=(I-f)*(Math.PI/180),M=Math.sin(w/2)*Math.sin(w/2)+Math.cos(n*(Math.PI/180))*Math.cos(v*(Math.PI/180))*Math.sin(b/2)*Math.sin(b/2);return 6371*(2*Math.atan2(Math.sqrt(M),Math.sqrt(1-M)))};g=A.flatMap(n=>n.images.map(f=>({...f,gallerySlug:n.slug}))).filter(n=>n.filename!==s.filename&&n.latitude&&n.longitude).map(n=>({...n,distance:c(s.latitude,s.longitude,n.latitude,n.longitude)})).sort((n,f)=>n.distance-f.distance)}const u=[...o,...g];return Array.from(new Map(u.map(c=>[c.filename,c])).values()).slice(0,6)},[l]);return e.jsxs("div",{className:"w-full max-w-[var(--content-width)] p-4 md:p-8 flex flex-col items-center",children:[e.jsx("title",{children:`${t.filename} | ${a.title} | ${r.meta.title}`}),e.jsx("meta",{name:"title",content:`${t.filename} | ${a.title} | ${r.meta.title}`}),e.jsx("meta",{name:"description",content:`${t.alt||a.title}`}),e.jsx("meta",{name:"image",content:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),640)}`}),e.jsx("meta",{name:"og:image",content:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),640)}`}),e.jsx("meta",{name:"og:title",content:`${t.filename} | ${a.title} | ${r.meta.title}`}),e.jsx("meta",{name:"og:description",content:`${t.alt||a.title}`}),e.jsx("meta",{name:"og:url",content:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),640)}`}),e.jsxs("div",{className:"w-full max-w-4xl flex flex-col gap-4",children:[e.jsx("div",{className:"flex items-center h-auto md:h-[80vh]",children:e.jsx(P,{src:i(a.slug,t.filename),alt:t.filename.replaceAll("_"," ").replace(".jpg","").trim(),width:t.width,height:t.height,sizes:"(max-width: 768px) 100vw, 1024px",className:"max-h-full h-full max-w-full object-contain"})}),e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsx("h1",{className:d("text-2xl md:text-3xl"),children:t.filename.replaceAll("_"," ").replace(".jpg","").trim()}),e.jsxs("h2",{className:"text-lg",children:[e.jsx("span",{className:"",children:"Fotoserie: "}),e.jsx($,{className:d(`underline  decoration-1 ${m==="dark"?"decoration-red-300 hover:text-red-300":"decoration-red-600 hover:text-red-600"} underline-offset-4`),to:`/gallery/${a.slug}`,children:a.title})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row-reverse gap-8 mt-4 border-t border-neutral-500/50 pt-4 md:pt-8 border-dotted",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl mb-2",children:"URLs"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[100px,1fr] gap-x-4 gap-y-3 text-sm",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider",children:"Original"}),e.jsxs("div",{className:"flex items-center gap-2 font-mono",children:[e.jsx(j,{href:i(a.slug,t.filename.replaceAll(" ","_"),"original"),hasDecoration:!1,className:d("truncate font-mono"),children:`${r.url}${i(a.slug,t.filename,"original")}`}),e.jsx(y,{textToCopy:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),"original")}`})]}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider",children:"1440w"}),e.jsxs("div",{className:"flex items-center gap-2 font-mono",children:[e.jsx(j,{href:i(a.slug,t.filename.replaceAll(" ","_"),1440),hasDecoration:!1,className:d("truncate font-mono"),children:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),1440)}`}),e.jsx(y,{textToCopy:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),1440)}`})]}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider",children:"640w"}),e.jsxs("div",{className:"flex items-center gap-2 font-mono",children:[e.jsx(j,{href:i(a.slug,t.filename.replaceAll(" ","_"),640),hasDecoration:!1,className:d("truncate font-mono"),children:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),640)}`}),e.jsx(y,{textToCopy:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),640)}`})]}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider",children:"380w"}),e.jsxs("div",{className:"flex items-center gap-2 font-mono",children:[e.jsx(j,{href:i(a.slug,t.filename.replaceAll(" ","_"),380),hasDecoration:!1,className:d("truncate font-mono"),children:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),380)}`}),e.jsx(y,{textToCopy:`${r.url}${i(a.slug,t.filename.replaceAll(" ","_"),380)}`})]}),t.createDate&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xl mt-4",children:"Datum & Uhrzeit"}),e.jsx($,{to:`/app/timeline?scrollTo=${k(t.createDate).toISOString().split("T")[0]}`,className:d("underline underline-offset-4",m==="dark"?"hover:text-red-300 decoration-red-300":"hover:text-red-600 decoration-red-600"),children:new Date(k(t.createDate)).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]}),t.latitude&&t.longitude&&e.jsxs("div",{className:"flex-1 mb-8 md:mb-4",children:[e.jsx("h2",{className:"text-xl mb-2",children:"Location"}),e.jsx("p",{className:"text-sm mb-2",children:`${t.latitude.toFixed(4)}, ${t.longitude.toFixed(4)}`}),e.jsx("div",{className:"border aspect-square w-full overflow-hidden",children:e.jsx(S,{initialViewState:{latitude:t.latitude,longitude:t.longitude,zoom:12},style:{width:"100%",height:"100%"},mapStyle:m==="dark"?r.mapbox.style.dark:r.mapbox.style.light,mapboxAccessToken:r.mapbox.accessToken,scrollZoom:!0,dragPan:!1,children:e.jsx(L,{longitude:t.longitude,latitude:t.latitude,children:e.jsx("div",{children:e.jsx("div",{className:d("w-4 h-4 border border-white",m==="dark"?"bg-red-300":"bg-red-600")})})})})}),e.jsxs("div",{className:"flex flex-wrap space-y-2 space-x-4 gap-0 mt-2",children:[e.jsx($,{to:`/app/map?gallery=${a.slug}&image=${t.filename}`,className:d("inline-block underline underline-offset-4 inline-block ",m==="dark"?"text-white decoration-red-300 hover:text-red-300 hover:decoration-red-300":"text-black decoration-red-500 hover:text-red-600"),children:"In Karte anzeigen"}),e.jsx(j,{href:`https://www.google.com/maps/search/?api=1&query=${t.latitude},${t.longitude}`,children:"Google Maps"}),e.jsx(j,{href:`http://maps.apple.com/?ll=${t.latitude},${t.longitude}`,children:"Apple Maps"})]})]})]})]})]}),p.length>0&&e.jsxs("div",{className:"w-full max-w-4xl mt-8 pt-8 border-t border-neutral-500/50 border-dotted",children:[e.jsx("h2",{className:"text-2xl mb-4",children:"Weitere Bilder"}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-4",children:p.map(s=>e.jsx($,{to:`/image/${encodeURI(s.filename.replace(/\.[^/.]+$/,""))}`,children:e.jsx("img",{src:i(s.gallerySlug,s.filename.replaceAll(" ","_"),380),alt:s.filename.replaceAll("_"," ").replace(".jpg","").trim(),width:380,height:380,sizes:"(max-width: 768px) 50vw, 20vw",className:"aspect-square object-cover w-full h-full"})},s.filename))})]})]})};export{Y as default};
