import{c as F,r as I,j as t,L,u as M,g as C,a as S}from"./index-D7Vr9xJz.js";import{k}from"./marked.esm-DJbTXz-_.js";import{I as E}from"./Image-JquqzkTy.js";import{g as $}from"./image-Ctxt7yQe.js";import{C as p}from"./config-C8EQu9lj.js";import"./mapbox-gl-DTIIU7sx.js";import"./cn-CBfrqCZ4.js";const G=g=>{const e=F.c(18),{alt:r,gallerySlug:o,imageFilename:l}=g,[i,s]=I.useState(null);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=h=>{h.width>h.height?s("landscape"):h.height>h.width?s("portrait"):s("square")},e[0]=n):n=e[0];const a=n;let u;e[1]!==i?(u=()=>{if(!i)return"w-full md:w-1/2";switch(i){case"landscape":return"w-full md:w-full";case"portrait":case"square":default:return"w-full md:w-1/2"}},e[1]=i,e[2]=u):u=e[2];const b=u,x=i==="landscape"?"(min-width: 1024px) 1024px, 100vw":"(min-width: 1024px) 512px, (min-width: 768px) 50vw, 100vw",w=`image-${l.split(".")[0]}`,y=b(),j=`/image/${l.replace(/\.[^/.]+$/,"")}`;let c;e[3]!==o||e[4]!==l?(c=$(o,l),e[3]=o,e[4]=l,e[5]=c):c=e[5];const v=r||"",N=i==="landscape"?427:i==="portrait"?960:640;let m;e[6]!==x||e[7]!==c||e[8]!==v||e[9]!==N?(m=t.jsx(E,{src:c,alt:v,width:640,height:N,onImageLoad:a,sizes:x,loading:"lazy",className:"w-full h-auto block"}),e[6]=x,e[7]=c,e[8]=v,e[9]=N,e[10]=m):m=e[10];let d;e[11]!==j||e[12]!==m?(d=t.jsx("div",{className:"p-0 sm:pr-4 sm:pb-4 md:py-6",children:t.jsx(L,{to:j,className:"block",children:m})}),e[11]=j,e[12]=m,e[13]=d):d=e[13];let f;return e[14]!==d||e[15]!==w||e[16]!==y?(f=t.jsx("div",{id:w,className:y,children:d}),e[14]=d,e[15]=w,e[16]=y,e[17]=f):f=e[17],f},A=()=>{const{slug:g}=M(),e=C.find(l=>l.slug===g),r=S(),o=I.useMemo(()=>e?.images?[...e.images].sort(()=>Math.random()-.5):[],[e]);return I.useEffect(()=>{let i=new URLSearchParams(r.search).get("image");if(!i&&r.hash){const s=r.hash.substring(1);i=s.startsWith("image-")?s.replace("image-",""):s}if(i){const s=`image-${i.split(".")[0]}`;setTimeout(()=>{const n=document.getElementById(s);n&&n.scrollIntoView({behavior:"smooth",block:"center"})},150)}if(e&&e.images){const s=document.createElement("script");s.type="application/ld+json",s.id="gallery-structured-data";const n=e.images.filter(a=>a.latitude&&a.longitude&&a.googleMapsUrl).map(a=>({"@context":"https://schema.org","@type":"ImageObject",name:a.filename,description:a.alt||`A photo from the gallery: ${e.title}`,contentUrl:`${p.url}${$(e.slug,a.filename,"original")}`,author:{"@type":"Person",name:"Luca Mack"},location:{"@type":"Place",geo:{"@type":"GeoCoordinates",latitude:a.latitude,longitude:a.longitude},sameAs:a.googleMapsUrl}}));return s.innerHTML=JSON.stringify(n),document.head.appendChild(s),()=>{const a=document.getElementById("gallery-structured-data");a&&document.head.removeChild(a)}}},[r,e]),e?t.jsxs("div",{children:[t.jsx("title",{children:`Fotoserie: ${e.title||e.name} | Luca Mack`}),t.jsx("meta",{name:"description",content:e.description||`Fotoserie: ${e.title||e.name}.`}),t.jsx("meta",{name:"title",content:`Fotoserie: ${e.title||e.name}`}),t.jsxs("div",{className:"px-4 md:px-0",children:[t.jsxs("div",{className:"flex flex-col items-start",children:[t.jsx("h1",{className:`${p.theme.headline.one} w-full max-w-[560px] text-wrap-balance md:pt-8 pt-6 pb-4  `,children:e.title||e.name}),e.description&&t.jsx("div",{className:"w-full max-w-[calc(var(--content-width)/2)] text-wrap-balance text-sm md:text-lg leading-8 my-4 pb-4 leading-tight",dangerouslySetInnerHTML:{__html:k(e.description)}})]}),o.length>0?t.jsx("div",{className:"max-w-[var(--content-width)] md:pr-4 flex flex-wrap justify-center items-center gap-8 md:gap-0 pb-4",children:o.map(l=>t.jsx(G,{alt:l.alt||`${e.title||e.name} - ${l.filename}`,gallerySlug:e.slug,imageFilename:l.filename},l.filename))}):t.jsx("p",{className:"text-left",children:p.systemMessages.noImagesFound}),e.timeframe||e.imageCount?t.jsx("div",{className:"max-w-[calc(1024px)] flex w-full  my-8 py-8 flex flex-col md:flex-row justify-between items-center text-sm",children:t.jsxs("div",{className:"text-left flex justify-center gap-4 w-full",children:[e.timeframe&&t.jsx("p",{children:e.timeframe})," - ",e.imageCount&&t.jsxs("p",{children:[e.imageCount," Fotos"]})]})}):null]})]}):t.jsx("div",{className:`${p.theme.headline.one} py-6 text-left`,children:p.systemMessages.noGalleryFound})};export{A as default};
