import{r as h,c as G,b as J,j as U}from"./index-Dri2YBdd.js";import{g as K}from"./image-CpkqAB9L.js";import{c as P}from"./cn-CBfrqCZ4.js";var H=new Map,z=new WeakMap,q=0,Q=void 0;function X(t){return t?(z.has(t)||(q+=1,z.set(t,q.toString())),z.get(t)):"0"}function Y(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?X(t.root):t[e]}`).toString()}function Z(t){const e=Y(t);let o=H.get(e);if(!o){const s=new Map;let g;const a=new IntersectionObserver(l=>{l.forEach(r=>{var n;const m=r.isIntersecting&&g.some(c=>r.intersectionRatio>=c);t.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=m),(n=s.get(r.target))==null||n.forEach(c=>{c(m,r)})})},t);g=a.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),o={id:e,observer:a,elements:s},H.set(e,o)}return o}function k(t,e,o={},s=Q){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const n=t.getBoundingClientRect();return e(s,{isIntersecting:s,target:t,intersectionRatio:typeof o.threshold=="number"?o.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:g,observer:a,elements:l}=Z(o),r=l.get(t)||[];return l.has(t)||l.set(t,r),r.push(e),a.observe(t),function(){r.splice(r.indexOf(e),1),r.length===0&&(l.delete(t),a.unobserve(t)),l.size===0&&(a.disconnect(),H.delete(g))}}function ee({threshold:t,delay:e,trackVisibility:o,rootMargin:s,root:g,triggerOnce:a,skip:l,initialInView:r,fallbackInView:n,onChange:m}={}){var c;const[u,x]=h.useState(null),$=h.useRef(m),[p,d]=h.useState({inView:!!r,entry:void 0});$.current=m,h.useEffect(()=>{if(l||!u)return;let f;return f=k(u,(E,j)=>{d({inView:E,entry:j}),$.current&&$.current(E,j),j.isIntersecting&&a&&f&&(f(),f=void 0)},{root:g,rootMargin:s,threshold:t,trackVisibility:o,delay:e},n),()=>{f&&f()}},[Array.isArray(t)?t.toString():t,u,g,s,a,l,o,n,e]);const b=(c=p.entry)==null?void 0:c.target,y=h.useRef(void 0);!u&&b&&!a&&!l&&y.current!==b&&(y.current=b,d({inView:!!r,entry:void 0}));const v=[x,p.inView,p.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}const te=[380,640,1440],oe=t=>{const e=G.c(38),{id:o,src:s,loading:g,alt:a,className:l,style:r,onImageLoad:n,sizes:m,width:c,height:u}=t,x=o===void 0?"":o,{theme:$}=J();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={triggerOnce:!0,threshold:.1},e[0]=p):p=e[0];const{ref:d,inView:b}=ee(p),[y,v]=h.useState(null),[f,E]=h.useState(null),[j,D]=h.useState(!1);let _;if(e[1]!==s){const i=s.split("/").pop()||"",I=s.split("/")[3];_=te.map(R=>`${K(I,i.replaceAll(" ","_"),R)} ${R}w`).join(", "),e[1]=s,e[2]=_}else _=e[2];const M=_;let A,T;if(e[3]!==b||e[4]!==s?(A=()=>b?((async()=>{try{v(s)}catch(I){console.error("Image loading or conversion failed:",I),E("Failed to load image.")}})(),re):void 0,T=[s,b],e[3]=b,e[4]=s,e[5]=A,e[6]=T):(A=e[5],T=e[6]),h.useEffect(A,T),f){let i;return e[7]!==f||e[8]!==d?(i=U.jsx("div",{ref:d,className:"w-full aspect-[4/3] flex items-center justify-center bg-gray-200 text-red-500 font-medium",children:f}),e[7]=f,e[8]=d,e[9]=i):i=e[9],i}let L;e[10]!==n?(L=i=>{D(!0),n&&n({width:i.currentTarget.naturalWidth,height:i.currentTarget.naturalHeight})},e[10]=n,e[11]=L):L=e[11];const B=L;if(!y){let i;e[12]!==u||e[13]!==c?(i=c&&u?{aspectRatio:`${c} / ${u}`}:{aspectRatio:"4 / 3"},e[12]=u,e[13]=c,e[14]=i):i=e[14];const I=i,R=`w-full h-auto ${$==="dark"?"bg-white/10":"bg-black/10"}`;let S;e[15]!==R?(S=P(R),e[15]=R,e[16]=S):S=e[16];let O;return e[17]!==I||e[18]!==d||e[19]!==S?(O=U.jsx("div",{ref:d,style:I,className:S}),e[17]=I,e[18]=d,e[19]=S,e[20]=O):O=e[20],O}let N;e[21]!==y?(N=y.replaceAll(" ","_"),e[21]=y,e[22]=N):N=e[22];const W=encodeURI(N),C=g!==void 0?g:"lazy",F=`${l} transition-opacity duration-300 ease-in ${j?"opacity-100":"opacity-0"}`;let w;e[23]!==a||e[24]!==B||e[25]!==u||e[26]!==x||e[27]!==m||e[28]!==M||e[29]!==r||e[30]!==F||e[31]!==W||e[32]!==C||e[33]!==c?(w=U.jsx("img",{id:x,src:W,srcSet:M,sizes:m,alt:a,width:c,height:u,loading:C,className:F,style:r,onLoad:B}),e[23]=a,e[24]=B,e[25]=u,e[26]=x,e[27]=m,e[28]=M,e[29]=r,e[30]=F,e[31]=W,e[32]=C,e[33]=c,e[34]=w):w=e[34];let V;return e[35]!==d||e[36]!==w?(V=U.jsx("div",{ref:d,className:"w-full h-full",children:w}),e[35]=d,e[36]=w,e[37]=V):V=e[37],V};function re(){}export{oe as I};
