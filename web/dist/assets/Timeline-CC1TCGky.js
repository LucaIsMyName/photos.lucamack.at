import{u as x,i as $,r as c,g as v,p as d,a as n,j as t,C as g,L as T,s as y,b as E}from"./index-CZwsoqej.js";import{S as C}from"./SeoHead-K38nFHkz.js";import"./mapbox-gl-CVYYZmbF.js";const F=()=>{const{theme:o}=x(),[m,u]=$(),[r,p]=c.useState(m.get("tab")||"images");c.useEffect(()=>{const e=m.get("scrollTo");if(e){const s=document.getElementById(e);s&&setTimeout(()=>{s.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[]),c.useEffect(()=>{const e=new URLSearchParams(m);r==="images"?e.delete("tab"):e.set("tab",r),m.toString()!==e.toString()&&u(e,{replace:!0})},[r,m,u]);const f=c.useMemo(()=>{const e=[];return v.forEach(s=>{s.images?.forEach((a,l)=>{e.push({...a,galleryTitle:s.title,gallerySlug:s.slug,index:l+1})})}),e},[]),S=c.useMemo(()=>{const e={};f.forEach(s=>{const a=d(s.createDate);if(a){const l=a.toISOString().split("T")[0];e[l]||(e[l]=[]),e[l].push(s)}});for(const s in e)e[s].sort((a,l)=>{const h=d(a.createDate)?.getTime()||0,i=d(l.createDate)?.getTime()||0;return h-i});return Object.entries(e).sort(([s],[a])=>new Date(a).getTime()-new Date(s).getTime())},[f]),k=c.useMemo(()=>v.map(e=>{if(!e.images||e.images.length===0)return{...e,startDate:null,endDate:null};const s=e.images.map(i=>d(i.createDate)).filter(i=>i!==null);if(s.length===0)return{...e,startDate:null,endDate:null};const a=s.sort((i,w)=>i.getTime()-w.getTime()),l=a[0],h=a[a.length-1];return{...e,startDate:l,endDate:h}}).filter(e=>e.startDate!==null&&e.endDate!==null).sort((e,s)=>s.startDate.getTime()-e.startDate.getTime()),[]),b=e=>`text-4xl md:text-5xl py-2   ${e===!0?x().theme==="dark"?`${g.theme.dark.text.primary}`:`${g.theme.light.text.primary}`:x().theme==="dark"?"text-white":"text-black"}`,j=n(`absolute sm:left-2 left-0 top-4.5 h-full w-0 ${g.theme.border.left}`),D=n("absolute -left-[32px] sm:-left-[23.4px] top-4.5 transform -translate-x-1/2 flex items-center"),N=n(g.theme.border.default,`${o==="dark"?"bg-red-300":"bg-red-600"} border-none h-2 w-2`);return t.jsxs("div",{className:`p-4  pl-7 sm:pl-4  md:px-8  md:pt-6 h-full  ${o==="light"?"bg-white text-gray-800":"bg-black text-gray-200"}`,children:[t.jsx(C,{title:"Timeline",description:"Timeline aller Fotos"}),t.jsxs("div",{className:"flex items-center justify-between mb-4 -ml-3 sm:ml-0",children:[t.jsx("h1",{className:"text-2xl sr-only",children:"Timeline"}),t.jsxs("div",{className:"flex items-center space-x-2 gap-2 md:ml-0",children:[t.jsx("button",{onClick:()=>p("images"),className:n(` ${b(r==="images")}`),children:"Fotos"}),t.jsx("button",{onClick:()=>p("galleries"),className:n(` ${b(r==="galleries")}`),children:"Serien"})]})]}),r==="images"&&t.jsxs("div",{className:"relative pl-8",children:[t.jsx("div",{className:j}),t.jsx("div",{className:"space-y-8",children:S.map(([e,s])=>t.jsxs("div",{id:e,className:"relative",children:[t.jsx("div",{className:D,children:t.jsx("div",{className:N})}),t.jsx("h2",{className:`sm:text-lg mb-4 sticky top-0 py-2 z-50 ${o==="dark"?"bg-black":"bg-white"}`,children:new Date(e).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric"})}),t.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-7 md:grid-cols-8 lg:grid-cols-9 xl:grid-cols-10 gap-2 sm:gap-4",children:s.map(a=>t.jsx(T,{to:`/gallery/${a.gallerySlug}/image/${y(a.filename.replace(/\.[^/.]+$/,""))}`,className:n(`${o==="dark"?"text-white bg-white/10":"text-black bg-black/10"} relative group block`),children:t.jsx("img",{src:E(a.gallerySlug,a.filename.replaceAll(" ","_"),160),alt:a.alt||a.filename,loading:"lazy",className:"w-full h-full object-cover aspect-square"})},a.filename))})]},e))})]}),r==="galleries"&&t.jsxs("div",{className:"relative pl-8",children:[t.jsx("div",{className:j}),t.jsx("h2",{className:"sr-only text-xl font-semibold my-4",children:"Gallerien nach Zeitraum"}),t.jsx("div",{className:"space-y-4",children:k.map(e=>t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:D,children:t.jsx("div",{className:N})}),t.jsxs(T,{to:`/gallery/${e.slug}`,className:"block p-4 pt-2",children:[t.jsx("h3",{className:" text-lg",children:e.title}),t.jsxs("p",{className:"text-xs ",children:[e.startDate.toLocaleDateString("de-DE")," - ",e.endDate.toLocaleDateString("de-DE")]}),t.jsxs("p",{className:"text-xs ",children:[e.images.length," Fotos"]})]})]},e.slug))})]})]})};export{F as default};
