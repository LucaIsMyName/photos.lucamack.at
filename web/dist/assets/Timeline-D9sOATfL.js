import{u as p,i as E,r as c,g as T,p as x,a as r,j as t,C as h,L as w,s as C,b as S}from"./index-DR-Rmu1t.js";import{S as F}from"./SeoHead-C4cGrFF3.js";import"./mapbox-gl-CVYYZmbF.js";const M=()=>{const{theme:i}=p(),[m,f]=E(),[n,b]=c.useState(m.get("tab")||"images");c.useEffect(()=>{const e=m.get("scrollTo");if(e){const s=document.getElementById(e);s&&setTimeout(()=>{s.scrollIntoView({behavior:"smooth",block:"start"})},100)}},[]),c.useEffect(()=>{const e=new URLSearchParams(m);n==="images"?e.delete("tab"):e.set("tab",n),m.toString()!==e.toString()&&f(e,{replace:!0})},[n,m,f]);const j=c.useMemo(()=>{const e=[];return T.forEach(s=>{s.images?.forEach((a,l)=>{e.push({...a,galleryTitle:s.title,gallerySlug:s.slug,index:l+1})})}),e},[]),$=c.useMemo(()=>{const e={};j.forEach(s=>{const a=x(s.createDate);if(a){const l=a.toISOString().split("T")[0];e[l]||(e[l]=[]),e[l].push(s)}});for(const s in e)e[s].sort((a,l)=>{const o=x(a.createDate)?.getTime()||0,u=x(l.createDate)?.getTime()||0;return o-u});return Object.entries(e).sort(([s],[a])=>new Date(a).getTime()-new Date(s).getTime())},[j]),y=c.useMemo(()=>T.map(e=>{if(!e.images||e.images.length===0)return{...e,startDate:null,endDate:null,duration:null,firstImage:null};const s=[];if(e.images.forEach(d=>{const g=x(d.createDate);g!==null&&s.push({image:d,date:g})}),s.length===0)return{...e,startDate:null,endDate:null,duration:null,firstImage:null};const a=[...s].sort((d,g)=>d.date.getTime()-g.date.getTime()),l=a[0]?.date,o=a[a.length-1]?.date;if(!l||!o)return{...e,startDate:null,endDate:null,duration:null,firstImage:null};const u=Math.ceil((o.getTime()-l.getTime())/(1e3*60*60*24)),I=a[0].image;return{...e,startDate:l,endDate:o,duration:u,firstImage:I}}).filter(e=>e.startDate!==null&&e.endDate!==null&&e.duration!==null&&e.firstImage!==null).sort((e,s)=>s.startDate.getTime()-e.startDate.getTime()),[]),N=e=>`text-4xl md:text-5xl py-2   ${e===!0?p().theme==="dark"?`${h.theme.dark.text.primary}`:`${h.theme.light.text.primary}`:p().theme==="dark"?"text-white":"text-black"}`,v=r(`absolute sm:left-2 left-0 top-4.5 h-full w-0 ${h.theme.border.left}`),D=r("absolute -left-[32px] sm:-left-[23.4px] top-4.5 transform -translate-x-1/2 flex items-center"),k=r(h.theme.border.default,`${i==="dark"?"bg-red-300":"bg-red-600"} border-none h-2 w-2`);return t.jsxs("div",{className:`p-4  pl-7 sm:pl-4  md:px-8  md:pt-6 h-full  ${i==="light"?"bg-white text-gray-800":"bg-black text-gray-200"}`,children:[t.jsx(F,{title:"Timeline",description:"Timeline aller Fotos"}),t.jsxs("div",{className:"flex items-center justify-between mb-4 -ml-3 sm:ml-0",children:[t.jsx("h1",{className:"text-2xl sr-only",children:"Timeline"}),t.jsxs("div",{className:"flex items-center space-x-2 gap-2 md:ml-0",children:[t.jsx("button",{onClick:()=>b("images"),"aria-label":"Show images","aria-pressed":n==="images",className:r(` ${N(n==="images")}`),children:"Fotos"}),t.jsx("button",{onClick:()=>b("galleries"),"aria-label":"Show galleries","aria-pressed":n==="galleries",className:r(` ${N(n==="galleries")}`),children:"Serien"})]})]}),n==="images"&&t.jsxs("div",{className:"relative pl-8",children:[t.jsx("div",{className:v}),t.jsx("div",{className:"space-y-8",children:$.map(([e,s])=>t.jsxs("div",{id:e,className:"relative ",children:[t.jsx("div",{className:D,children:t.jsx("div",{className:k})}),t.jsx("h2",{className:`text-sm mb-3 sticky top-0 pb-1 pt-3 font-mono z-50 ${i==="dark"?"bg-linear-[to_bottom,var(--color-black),rgba(0,0,0,0.95),rgba(0,0,0,0.7),transparent]":"bg-linear-[to_bottom,var(--color-white),rgba(255,255,255,0.95),rgba(255,255,255,0.7),transparent]"}`,children:new Date(e).toLocaleDateString("de-DE",{year:"numeric",month:"long",day:"numeric"})}),t.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-7 md:grid-cols-8 lg:grid-cols-9 xl:grid-cols-10 gap-2 sm:gap-4",children:s.map(a=>t.jsx(w,{to:`/gallery/${a.gallerySlug}/image/${C(a.filename.replace(/\.[^/.]+$/,""))}`,className:r(`${i==="dark"?"text-white bg-white/10":"text-black bg-black/10"} relative group block`),children:t.jsx("img",{src:S(a.gallerySlug,a.filename.replaceAll(" ","_"),160),alt:a.alt||a.filename,loading:"lazy",className:"w-full h-full object-cover aspect-square"})},a.filename))})]},e))})]}),n==="galleries"&&t.jsxs("div",{className:"relative pl-8",children:[t.jsx("div",{className:v}),t.jsx("h2",{className:"sr-only text-xl my-4",children:"Gallerien nach Zeitraum"}),t.jsx("div",{className:"space-y-6",children:y.map(e=>t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:D,children:t.jsx("div",{className:k})}),t.jsx(w,{to:`/gallery/${e.slug}`,className:"block p-0 pt-2",children:t.jsxs("div",{className:"flex items-center gap-4",children:[e.firstImage&&t.jsx("img",{src:S(e.slug,e.firstImage.filename.replaceAll(" ","_"),160),alt:e.title,className:"w-16 h-16 sm:w-20 sm:h-20 object-cover flex-shrink-0 mt-2",loading:"lazy"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:r("text-lg mb-1",i==="dark"?"text-white":"text-black"),children:e.title}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1 text-xs",children:[t.jsx("span",{className:r(i==="dark"?"text-gray-400":"text-gray-600"),children:e.startDate.toLocaleDateString("de-DE",{day:"numeric",month:"short",year:"numeric"})}),t.jsx("span",{className:r("text-gray-500"),children:"-"}),t.jsx("span",{className:r(i==="dark"?"text-gray-400":"text-gray-600"),children:e.endDate.toLocaleDateString("de-DE",{day:"numeric",month:"short",year:"numeric"})})]}),t.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-2 text-xs",children:[t.jsxs("span",{className:r(i==="dark"?"text-gray-400":"text-gray-600"),children:[e.images.length," ",e.images.length===1?"Foto":"Fotos"]}),e.duration>0&&t.jsxs(t.Fragment,{children:["-",t.jsx("span",{className:r(i==="dark"?"text-gray-400":"text-gray-600"),children:e.duration===0?"< 1 Tag":e.duration===1?"1 Tag":`${e.duration} Tage`})]})]})]})]})})]},e.slug))})]})]})};export{M as default};
