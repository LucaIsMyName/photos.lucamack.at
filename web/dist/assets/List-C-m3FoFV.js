import{e as oe,c as le,r as u,b as J,j as t,d as ie,g as Z,L as ee,C as re,f as de}from"./index-VZnAaMEB.js";import{V as me,T as he,I as fe,S as ue,a as xe,b as ge,c as pe,d as be,P as je,C as we,R as ye}from"./index-gBFLEZyU.js";import{p as V}from"./date-RcxNdlrM.js";import{C as W}from"./config-C8EQu9lj.js";import{c as ae}from"./cn-CBfrqCZ4.js";import{g as te}from"./image-Ctxt7yQe.js";import{D as Se}from"./download-eX2go8vK.js";import"./mapbox-gl-DTIIU7sx.js";import"./index-DpuP5BdU.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Ne=oe("chevron-left",ve);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],$e=oe("chevron-right",De),ne=x=>{const e=le.c(25),{children:c,className:T}=x,h=T===void 0?"":T,g=u.useRef(null),[f,E]=u.useState(!1),[S,G]=u.useState(!1),{theme:i}=J();let D;e[0]===Symbol.for("react.memo_cache_sentinel")?(D=n=>{const m=g.current;if(m){const j=m.clientWidth*.8;m.scrollBy({left:n==="left"?-j:j,behavior:"smooth"})}},e[0]=D):D=e[0];const d=D;let $;e[1]===Symbol.for("react.memo_cache_sentinel")?($=()=>{const n=()=>{const j=g.current;if(j){const{scrollLeft:R,scrollWidth:I,clientWidth:K}=j,M=R<=0,z=R>=I-K-1;E(!M),G(!z)}},m=g.current;if(m){n(),m.addEventListener("scroll",n);const j=new ResizeObserver(n);return j.observe(m),()=>{m.removeEventListener("scroll",n),j.unobserve(m)}}},e[1]=$):$=e[1];let o;e[2]!==c?(o=[c],e[2]=c,e[3]=o):o=e[3],u.useEffect($,o);const F=`flex items-center  w-full overflow-x-auto no-scrollbar py-2 ${h}`;let w;e[4]!==c||e[5]!==F?(w=t.jsx("div",{ref:g,className:F,children:c}),e[4]=c,e[5]=F,e[6]=w):w=e[6];const y=`absolute top-0 left-0 bottom-0 w-12 bg-gradient-to-r ${i==="light"?"from-white":"from-black"} to-transparent pointer-events-none transition-opacity duration-300 ${f?"opacity-100":"opacity-0"}`;let b;e[7]===Symbol.for("react.memo_cache_sentinel")?(b=()=>d("left"),e[7]=b):b=e[7];const v=`absolute top-1/2 -translate-y-1/2 left-0 cursor-pointer ${i==="dark"?"text-white":"text-black"} pointer-events-auto`;let k;e[8]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsx(Ne,{size:20}),e[8]=k):k=e[8];let N;e[9]!==v?(N=t.jsx("div",{onClick:b,className:v,children:k}),e[9]=v,e[10]=N):N=e[10];let p;e[11]!==N||e[12]!==y?(p=t.jsx("div",{className:y,children:N}),e[11]=N,e[12]=y,e[13]=p):p=e[13];const C=`absolute top-0 right-0 bottom-0 w-12 bg-gradient-to-l ${i==="light"?"from-white":"from-black"} to-transparent pointer-events-none transition-opacity duration-300 ${S?"opacity-100":"opacity-0"}`;let O;e[14]===Symbol.for("react.memo_cache_sentinel")?(O=()=>d("right"),e[14]=O):O=e[14];const L=`absolute top-1/2 -translate-y-1/2 right-0 cursor-pointer ${i==="dark"?"text-white":"text-black"} pointer-events-auto`;let s;e[15]===Symbol.for("react.memo_cache_sentinel")?(s=t.jsx($e,{size:20}),e[15]=s):s=e[15];let l;e[16]!==L?(l=t.jsx("div",{onClick:O,className:L,children:s}),e[16]=L,e[17]=l):l=e[17];let r;e[18]!==C||e[19]!==l?(r=t.jsx("div",{className:C,children:l}),e[18]=C,e[19]=l,e[20]=r):r=e[20];let a;return e[21]!==p||e[22]!==r||e[23]!==w?(a=t.jsxs("div",{className:"relative flex items-center w-full",children:[w,p,r]}),e[21]=p,e[22]=r,e[23]=w,e[24]=a):a=e[24],a};function se(x,e){const c=le.c(4),[T,h]=u.useState(x);let g,f;return c[0]!==e||c[1]!==x?(g=()=>{const E=setTimeout(()=>{h(x)},e);return()=>{clearTimeout(E)}},f=[x,e],c[0]=e,c[1]=x,c[2]=g,c[3]=f):(g=c[2],f=c[3]),u.useEffect(g,f),T}const ce=x=>{const e=le.c(61),{searchTerm:c,setSearchTerm:T,sortKey:h,setSortKey:g,sortOptions:f,sortOrder:E,setSortOrder:S,startDate:G,setStartDate:i,endDate:D,setEndDate:d,onClearFilters:$}=x,{theme:o}=J(),F=o==="dark"?"border-white":"border-black",w=`flex-shrink-0 p-2 border-r ${F}`;let y;e[0]!==T?(y=B=>T(B.target.value),e[0]=T,e[1]=y):y=e[1];let b;e[2]!==c||e[3]!==y?(b=t.jsx("input",{type:"text",placeholder:"Suchen...",value:c,onChange:y,className:"bg-transparent focus:outline-none w-48"}),e[2]=c,e[3]=y,e[4]=b):b=e[4];let v;e[5]!==w||e[6]!==b?(v=t.jsx("div",{className:w,children:b}),e[5]=w,e[6]=b,e[7]=v):v=e[7];const k=`flex-shrink-0 flex items-center gap-4 p-2 px-4 border-r ${F}`;let N;e[8]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("span",{className:"whitespace-nowrap",children:"Filter von"}),e[8]=N):N=e[8];let p;e[9]!==i?(p=B=>i(B.target.value),e[9]=i,e[10]=p):p=e[10];let C;e[11]!==G||e[12]!==p?(C=t.jsx("input",{type:"date",value:G,onChange:p,className:"bg-transparent focus:outline-none uppercase"}),e[11]=G,e[12]=p,e[13]=C):C=e[13];let O;e[14]===Symbol.for("react.memo_cache_sentinel")?(O=t.jsx("span",{children:"bis"}),e[14]=O):O=e[14];let L;e[15]!==d?(L=B=>d(B.target.value),e[15]=d,e[16]=L):L=e[16];let s;e[17]!==D||e[18]!==L?(s=t.jsx("input",{type:"date",value:D,onChange:L,className:"bg-transparent focus:outline-none uppercase"}),e[17]=D,e[18]=L,e[19]=s):s=e[19];let l;e[20]!==s||e[21]!==k||e[22]!==C?(l=t.jsxs("div",{className:k,children:[N,C,O,s]}),e[20]=s,e[21]=k,e[22]=C,e[23]=l):l=e[23];const r=`flex-shrink-0 flex items-center gap-4 p-2 px-4 border-r ${F}`;let a;e[24]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx("span",{className:"whitespace-nowrap",children:"Sortieren nach"}),e[24]=a):a=e[24];let n;e[25]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(me,{}),e[25]=n):n=e[25];let m;e[26]===Symbol.for("react.memo_cache_sentinel")?(m=t.jsxs(he,{className:"inline-flex items-center justify-center gap-2 bg-transparent focus:outline-none",children:[n,t.jsx(fe,{children:t.jsx(re,{size:16})})]}),e[26]=m):m=e[26];const j=`overflow-hidden ${o==="dark"?"bg-black text-white border-white":"bg-white text-black border-black"} border`;let R;e[27]===Symbol.for("react.memo_cache_sentinel")?(R=t.jsx(ue,{className:"flex items-center justify-center h-6 cursor-default",children:t.jsx(de,{})}),e[27]=R):R=e[27];let I;if(e[28]!==f||e[29]!==o){let B;e[31]!==o?(B=Y=>t.jsx(xe,{value:Y.value,className:`text-sm leading-none flex items-center h-6 pr-8 pl-6 relative select-none data-[highlighted]:outline-none ${o==="dark"?"data-[highlighted]:bg-red-300 data-[highlighted]:text-black":"data-[highlighted]:bg-red-600 data-[highlighted]:text-white"}`,children:t.jsx(ge,{children:Y.label})},Y.value),e[31]=o,e[32]=B):B=e[32],I=f.map(B),e[28]=f,e[29]=o,e[30]=I}else I=e[30];let K;e[33]!==I?(K=t.jsx(pe,{className:"p-1",children:I}),e[33]=I,e[34]=K):K=e[34];let M;e[35]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(be,{className:"flex items-center justify-center h-6 cursor-default",children:t.jsx(re,{})}),e[35]=M):M=e[35];let z;e[36]!==j||e[37]!==K?(z=t.jsx(je,{children:t.jsxs(we,{className:j,children:[R,K,M]})}),e[36]=j,e[37]=K,e[38]=z):z=e[38];let A;e[39]!==g||e[40]!==h||e[41]!==z?(A=t.jsxs(ye,{value:h,onValueChange:g,children:[m,z]}),e[39]=g,e[40]=h,e[41]=z,e[42]=A):A=e[42];let P;e[43]!==S||e[44]!==E?(P=()=>S(E==="asc"?"desc":"asc"),e[43]=S,e[44]=E,e[45]=P):P=e[45];const Q=E==="asc"?"(Aufsteigend)":"(Absteigend)";let _;e[46]!==P||e[47]!==Q?(_=t.jsx("button",{onClick:P,className:"cursor-pointer whitespace-nowrap",children:Q}),e[46]=P,e[47]=Q,e[48]=_):_=e[48];let H;e[49]!==r||e[50]!==A||e[51]!==_?(H=t.jsxs("div",{className:r,children:[a,A,_]}),e[49]=r,e[50]=A,e[51]=_,e[52]=H):H=e[52];const X=`${o==="dark"?"text-red-300":"text-red-600"} cursor-pointer underline underline-offset-4 whitespace-nowrap hover:underline`;let U;e[53]!==$||e[54]!==X?(U=t.jsx("div",{className:"flex-shrink-0 p-2 px-4",children:t.jsx("button",{onClick:$,className:X,children:"Filter löschen"})}),e[53]=$,e[54]=X,e[55]=U):U=e[55];let q;return e[56]!==l||e[57]!==H||e[58]!==U||e[59]!==v?(q=t.jsxs("div",{className:"flex items-center w-full",children:[v,l,H,U]}),e[56]=l,e[57]=H,e[58]=U,e[59]=v,e[60]=q):q=e[60],q},Ve=()=>{const[x,e]=ie(),[c,T]=u.useState(x.get("tab")||"images"),[h,g]=u.useState(x.get("search")||""),[f,E]=u.useState(x.get("sortBy")||"createDate"),[S,G]=u.useState(x.get("gallerySortBy")||"title"),[i,D]=u.useState(x.get("sortOrder")||"desc"),[d,$]=u.useState(x.get("startDate")||""),[o,F]=u.useState(x.get("endDate")||""),w=se(h,300),y=se(d,300),b=se(o,300);u.useEffect(()=>{const s=new URLSearchParams;c!=="images"&&s.set("tab",c),w&&s.set("search",w),f!=="createDate"&&s.set("sortBy",f),S!=="title"&&s.set("gallerySortBy",S),i!=="desc"&&s.set("sortOrder",i),y&&s.set("startDate",y),b&&s.set("endDate",b),e(s,{replace:!0})},[c,w,f,S,i,y,b,e]);const v=()=>{g(""),E("createDate"),G("title"),D("desc"),$(""),F("")},k=u.useMemo(()=>{const s=[];return Z.forEach(l=>{l.images?.forEach((r,a)=>{s.push({...r,galleryTitle:l.title,gallerySlug:l.slug,index:a+1})})}),s},[]),N=u.useMemo(()=>{let s=k;if(h){const l=h.toLowerCase().split(" ").filter(Boolean);l.length>0&&(s=s.filter(r=>{const a=`${r.galleryTitle.toLowerCase()} ${r.filename?r.filename.toLowerCase():""}`;return l.every(n=>a.includes(n))}))}if(d){const l=new Date(d);l.setHours(0,0,0,0),s=s.filter(r=>{const a=V(r.createDate);return a&&a>=l})}if(o){const l=new Date(o);l.setHours(23,59,59,999),s=s.filter(r=>{const a=V(r.createDate);return a&&a<=l})}return[...s].sort((l,r)=>{const a=f==="createDate"?V(l.createDate):l.galleryTitle,n=f==="createDate"?V(r.createDate):r.galleryTitle;return a===null?1:n===null?-1:a<n?i==="asc"?-1:1:a>n?i==="asc"?1:-1:0})},[k,h,f,i,d,o]),p=u.useMemo(()=>{let s=Z.map(l=>({...l,createDate:l.images?.[0]?.createDate}));if(h){const l=h.toLowerCase().split(" ").filter(Boolean);l.length>0&&(s=s.filter(r=>{const a=r.title.toLowerCase();return l.every(n=>a.includes(n))}))}if(d||o){const l=d?new Date(d):null;l&&l.setHours(0,0,0,0);const r=o?new Date(o):null;r&&r.setHours(23,59,59,999),s=s.filter(a=>k.filter(n=>{const m=V(n.createDate),j=d?new Date(d):null,R=o?new Date(o):null;return j&&m&&m<j||R&&m&&m>R?!1:n.galleryTitle.toLowerCase().includes((h||"").toLowerCase())}).some(n=>n.gallerySlug===a.slug))}return[...s].sort((l,r)=>{const a=S==="createDate"?V(l.createDate):l.title,n=S==="createDate"?V(r.createDate):r.title;return a===null?1:n===null?-1:a<n?i==="asc"?-1:1:a>n?i==="asc"?1:-1:0})},[h,S,i,d,o]),C=u.useMemo(()=>{const s={};return Z.forEach(l=>{l.images&&l.images.length>0?s[l.slug]=l.images[Math.floor(Math.random()*l.images.length)]:s[l.slug]=null}),s},[]),O=[{value:"createDate",label:"Datum"},{value:"galleryTitle",label:"Name"}],L=[{value:"title",label:"Name"},{value:"createDate",label:"Datum"}];return t.jsxs("div",{className:"p-4 sm:pl-0",children:[t.jsx("title",{children:"Liste aller Fotos und Galerien | Luca Mack"}),t.jsx("meta",{name:"title",content:"Liste aller Fotos und Galerien | Luca Mack"}),t.jsx("meta",{name:"description",content:"Eine Liste aller Fotos und Galerien. Sortierbar und Filterbar."}),t.jsxs("div",{className:"flex gap-4 border-b",children:[t.jsx("button",{className:ae(`cursor-pointer ${W.theme.headline.one} py-2 sm:py-4 ${c==="images"?J().theme==="dark"?`${W.theme.dark.text.primary}`:`${W.theme.light.text.primary}`:""}`),onClick:()=>T("images"),children:"Fotos"}),t.jsx("button",{className:ae(`cursor-pointer ${W.theme.headline.one} py-2 sm:py-4 ${c==="galleries"?J().theme==="dark"?`${W.theme.dark.text.primary}`:`${W.theme.light.text.primary}`:""}`),onClick:()=>T("galleries"),children:"Galerien"})]}),c==="images"&&t.jsxs("div",{className:"",children:[t.jsx(ne,{className:"items-center border-b py-5 ",children:t.jsx(ce,{searchTerm:h,setSearchTerm:g,sortKey:f,setSortKey:E,sortOptions:O,sortOrder:i,setSortOrder:D,startDate:d,setStartDate:$,endDate:o,setEndDate:F,onClearFilters:v})}),t.jsx("div",{className:"flex flex-col lg:flex-row lg:flex-wrap",children:N.map(s=>t.jsx("div",{className:"w-full lg:w-1/2",children:t.jsxs("div",{className:"flex lg:flex-row items-center gap-4 py-2",children:[t.jsx(ee,{to:`/image/${s.filename.replace(/\.[^/.]+$/,"")}`,children:t.jsx("img",{loading:"lazy",src:te(s.gallerySlug,s.filename,640),alt:s.alt||`${s.galleryTitle} - ${s.filename}`,width:128,height:128,className:"min-w-24 w-24 min-h-24 h-24 lg:w-24 lg:h-24 object-cover aspect-square"})}),t.jsxs("div",{className:"text-sm",children:[t.jsx("h3",{className:"truncate text-base",children:s.filename}),t.jsxs("p",{className:"truncate text-xs",children:["Erstellt: ",V(s.createDate)?.toLocaleString()||"Ungültiges Datum"]}),s.latitude&&s.longitude?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"text-xs",children:"Koordinaten: "}),t.jsx(ee,{to:`/map?gallery=${s.gallerySlug}&image=${s.filename}`,children:t.jsx("span",{className:"text-xs underline truncate",children:`${s.latitude.toFixed(4)}, ${s.longitude.toFixed(4)}`})})]}):t.jsx("p",{className:"truncate",children:"Koordinaten: N/V"}),t.jsxs("a",{href:te(s.gallerySlug,s.filename,"original"),download:!0,className:"text-xs flex items-center gap-1 hover:underline w-fit",children:[t.jsx(Se,{size:12}),t.jsx("span",{className:"truncate underline",children:"Download Foto"})]})]})]})},`${s.gallerySlug}-${s.filename}`))})]}),c==="galleries"&&t.jsxs("div",{children:[t.jsx(ne,{className:"items-center border-b py-5 ",children:t.jsx(ce,{searchTerm:h,setSearchTerm:g,sortKey:S,setSortKey:G,sortOptions:L,sortOrder:i,setSortOrder:D,startDate:d,setStartDate:$,endDate:o,setEndDate:F,onClearFilters:v})}),t.jsx("div",{className:"flex flex-col lg:flex-row lg:flex-wrap",children:p.map((s,l)=>{const r=C[s.slug];return t.jsxs("div",{className:"w-full lg:w-1/2",children:[t.jsxs(ee,{to:`/gallery/${s.slug}`,className:"flex lg:flex-row items-center gap-4 py-2",children:[r?t.jsx("img",{loading:"lazy",src:te(s.slug,r.filename,640),alt:s.title,width:128,height:128,className:"lg:w-24 lg:h-24 min-w-24 min-h-24 w-24 h-24 object-cover "}):t.jsx("div",{className:"lg:w-24 lg:h-24 w-24 h-24 bg-gray-200 dark:bg-gray-700 flex items-center justify-center",children:t.jsx("span",{className:"text-xs text-gray-500",children:"Kein Bild"})}),t.jsxs("div",{className:"text-sm",children:[t.jsx("h3",{className:"truncate text-lg ",children:s.title}),t.jsxs("p",{className:"truncate",children:[s.images?.length||0," Bilder"]}),t.jsxs("p",{className:"truncate",children:["Erstellt: ",V(s.createDate)?.toLocaleDateString()||"N/V"]})]})]}),l<p.length-1&&""]},l)})})]})]})};export{Ve as default};
