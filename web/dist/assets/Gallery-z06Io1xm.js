import{c as D,r as S,s as k,b as w,j as a,L,u as M,d as O,g as f,e as U,C as m,p as C,a as A}from"./index-Ba8CfoLB.js";import{k as E}from"./marked.esm-DJbTXz-_.js";import{I as H}from"./Image-JRgcYQu1.js";import{C as P,a as R}from"./CopyButton-BEr2JZSy.js";import z from"./NotFound-BxO9Pih2.js";import{S as F}from"./SeoHead-aJOOPHCb.js";import{H as G}from"./Href-e6VpPOrZ.js";import"./mapbox-gl-CNTiHEyl.js";import"./check-C__kM_06.js";const B=o=>{const e=D.c(19),{alt:t,gallerySlug:i,imageFilename:c}=o,[l,n]=S.useState(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=u=>{u.width>u.height?n("landscape"):u.height>u.width?n("portrait"):n("square")},e[0]=r):r=e[0];const d=r;let s;e[1]!==l?(s=()=>{if(!l)return"w-full md:w-1/2 flex-grow-1 max-w-[calc(var(--content-width)/1.5)]";switch(l){case"landscape":return"w-full md:w-full";case"portrait":case"square":default:return"w-full md:w-1/2 flex-grow-1 max-w-[calc(var(--content-width)/1.5)]"}},e[1]=l,e[2]=s):s=e[2];const T=s,j=l==="landscape"?"(min-width: 1024px) 1024px, 100vw":"(min-width: 1024px) 512px, (min-width: 768px) 50vw, 100vw",$=c.replace(/\.[^/.]+$/,""),y=`/gallery/${i}/image/${k($)}`,N=`${k($)}`,v=T(),b=`Link zum Foto: ${t}`;let p;e[3]!==i||e[4]!==c?(p=w(i,c),e[3]=i,e[4]=c,e[5]=p):p=e[5];const I=l==="landscape"?427:l==="portrait"?960:640;let h;e[6]!==t||e[7]!==j||e[8]!==p||e[9]!==I?(h=a.jsx(H,{src:p,alt:t,width:640,height:I,onImageLoad:d,sizes:j,loading:"lazy",className:"w-full h-auto block"}),e[6]=t,e[7]=j,e[8]=p,e[9]=I,e[10]=h):h=e[10];let g;e[11]!==y||e[12]!==b||e[13]!==h?(g=a.jsx("div",{className:"p-0 pr-0 lg:pr-4 sm:pb-4 md:pr-4 md:py-6",children:a.jsx(L,{title:b,to:y,className:"block",children:h})}),e[11]=y,e[12]=b,e[13]=h,e[14]=g):g=e[14];let x;return e[15]!==N||e[16]!==v||e[17]!==g?(x=a.jsx("div",{id:N,className:v,children:g}),e[15]=N,e[16]=v,e[17]=g,e[18]=x):x=e[18],x},_=()=>{const{theme:o}=M(),{slug:e}=O(),t=f.find(l=>l.slug===e),i=U(),c=S.useMemo(()=>t?.images?[...t.images].sort(()=>Math.random()-.5):[],[t]);return S.useEffect(()=>{let n=new URLSearchParams(i.search).get("image");if(!n&&i.hash){const r=i.hash.substring(1);n=r.startsWith("image-")?r.replace("image-",""):r}if(n){const r=`image-${n.split(".")[0]}`;setTimeout(()=>{const d=document.getElementById(r);d&&d.scrollIntoView({behavior:"smooth",block:"center"})},150)}if(t&&t.images){const r=document.createElement("script");r.type="application/ld+json",r.id="gallery-structured-data";const d=t.images.filter(s=>s.latitude&&s.longitude).map(s=>({"@context":"https://schema.org","@type":"ImageObject",name:s.filename.replaceAll("_"," ").replace(".jpg","").trim(),description:`A photo from the gallery: ${t.title}`,contentUrl:`${m.url}${w(t.slug,encodeURI(s.filename.replaceAll(" ","_")),"original")}`,width:s.width||"1920",height:s.height||"1080",datePublished:s.createDate?C(s.createDate)?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]:new Date().toISOString().split("T")[0],dateCreated:s.createDate?C(s.createDate)?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]:new Date().toISOString().split("T")[0],author:{"@type":"Person",name:m.author,url:m.url},copyrightHolder:{"@type":"Person",name:m.author},license:"https://creativecommons.org/licenses/by-nc/4.0/",geo:{"@type":"GeoCoordinates",latitude:s.latitude,longitude:s.longitude},...s.googleMapsUrl&&{sameAs:s.googleMapsUrl}}));return r.innerHTML=JSON.stringify(d),document.head.appendChild(r),()=>{const s=document.getElementById("gallery-structured-data");s&&document.head.removeChild(s)}}},[i,t]),t?a.jsxs("div",{children:[a.jsx(F,{title:`Fotoserie: ${t.title||t.name} | ${m.author}`,description:t.description||`Fotoserie: ${t.title||t.name}.`,imageUrl:window.location.origin+w(t.slug,t.images[Math.floor(Math.random()*t.images.length)].filename)}),a.jsxs("div",{className:"px-4  md:pl-8 md:px-0",children:[a.jsxs("div",{className:"flex flex-col items-start",children:[a.jsx("h1",{className:`${m.theme.headline.one} w-full max-w-[calc(var(--content-width)/(21/13))] text-wrap-balance md:pt-8 pt-6 pb-4  `,children:t.title||t.name}),t.description&&a.jsx("div",{className:"w-full max-w-[calc(var(--content-width)/(21/13))] text-wrap-balance text-sm md:text-lg leading-8 my-4 pb-4 leading-tight",dangerouslySetInnerHTML:{__html:E(t.description)}})]}),c.length>0?a.jsx("div",{className:"md:max-w-[calc(var(--content-width))] lg:pr-4 flex flex-wrap justify-center items-center gap-8 md:gap-0 pb-4",children:c.map(l=>a.jsx(B,{alt:`${l.filename.replaceAll("_"," ").replace(".jpg","").trim()}`,gallerySlug:t.slug,imageFilename:l.filename},l.filename))}):a.jsx("p",{className:"text-left",children:"Keine Fotos in der Serie gefunden"}),a.jsxs("div",{className:"md:max-w-[calc(var(--content-width))] w-full gap-4 my-8 py-8 flex flex-col justify-between items-center text-sm",children:[t.timeframe||t.imageCount?a.jsx("div",{className:"w-full",children:a.jsxs("span",{className:`w-full text-xs font-mono ${o==="dark"?"text-white":"text-black"} text-center w-full`,children:[t.timeframe?a.jsxs("p",{children:[t.timeframe," "]}):a.jsx("p",{children:"N/A"})," ",t.imageCount?a.jsxs("p",{children:[t.imageCount," Fotos"]}):a.jsx("p",{children:"N/A"})]})}):null,a.jsxs("div",{className:"flex flex-col md:flex-row md:gap-6 gap-0 justify-center items-center space-y-4 md:space-y-0",children:[a.jsx(P,{textToCopy:window.location.href,children:a.jsx("span",{className:`font-mono ${o==="dark"?"text-white":"text-black"}`,children:"Link Kopieren"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(R,{size:16,className:A(o==="dark"?"text-neutral-400":"text-neutral-500")}),a.jsx("span",{className:`text-xs font-mono ${o==="dark"?"text-white":"text-black"}`,children:a.jsx(G,{to:"/page/imprint",children:m.author})})]})]}),t.tags&&t.tags.length>0&&a.jsx("div",{className:"w-full  my-6",children:a.jsx("div",{className:"flex justify-center items-center flex-wrap gap-2",children:t.tags.map(l=>a.jsx(L,{to:`/app/tags?tag=${encodeURIComponent(l)}`,className:`px-3 py-1 border border-neutral-500/20 text-[9.5px] cursor-pointer transition-colors hover:bg-black hover:text-white ${o==="light"?"font-mono text-gray-700":"font-mono text-gray-300"}`,children:l},l))})})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(F,{title:"404",description:"Fotoserie nicht gefunden",imageUrl:w(f[0].slug,f[0].images[Math.floor(Math.random()*f[0].images.length)].filename),noIndex:!0}),a.jsx(z,{})]})};export{_ as default};
