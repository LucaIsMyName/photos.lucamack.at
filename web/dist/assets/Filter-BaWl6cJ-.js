import{d as st,c as Xe,u as Ye,r as j,i as at,g as it,a as Ve,j as t,C as y,L as nt,s as ct,b as rt,X as He}from"./index-7GhqXJxD.js";import{a as ot,M as mt}from"./scale-control-2v-HjfSr.js";import"./mapbox-gl-CNTiHEyl.js";import{S as ft}from"./SeoHead-CjOnwIow.js";import{R as dt,a as ht,T as xt,b as gt}from"./index-Dd0Qo3jB.js";import{M as ut}from"./map-pin-Dj_G9VgB.js";import"./index-ljDGUzWt.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],pt=st("palette",bt),Ke=[{name:"Red",minRgb:[150,0,0],maxRgb:[255,100,100],hex:"#ff0000"},{name:"Orange",minRgb:[200,100,0],maxRgb:[255,200,100],hex:"#ff8000"},{name:"Yellow",minRgb:[200,200,0],maxRgb:[255,255,100],hex:"#ffff00"},{name:"Green",minRgb:[0,150,0],maxRgb:[100,255,100],hex:"#00ff00"},{name:"Cyan",minRgb:[0,200,200],maxRgb:[100,255,255],hex:"#00ffff"},{name:"Blue",minRgb:[0,0,150],maxRgb:[100,100,255],hex:"#0000ff"},{name:"Purple",minRgb:[100,0,150],maxRgb:[200,100,255],hex:"#8000ff"},{name:"Pink",minRgb:[200,100,150],maxRgb:[255,200,200],hex:"#ff80c0"},{name:"Brown",minRgb:[100,50,0],maxRgb:[150,100,50],hex:"#964b00"},{name:"Black",minRgb:[0,0,0],maxRgb:[50,50,50],hex:"#000000"},{name:"Gray",minRgb:[100,100,100],maxRgb:[200,200,200],hex:"#808080"},{name:"White",minRgb:[200,200,200],maxRgb:[255,255,255],hex:"#ffffff"}],jt=(e,l,r,s=0)=>e[0]>=l[0]-s&&e[0]<=r[0]+s&&e[1]>=l[1]-s&&e[1]<=r[1]+s&&e[2]>=l[2]-s&&e[2]<=r[2]+s,yt=(e,l,r,s)=>{const f=(r-e)*(Math.PI/180),k=(s-l)*(Math.PI/180),c=Math.sin(f/2)*Math.sin(f/2)+Math.cos(e*(Math.PI/180))*Math.cos(r*(Math.PI/180))*Math.sin(k/2)*Math.sin(k/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))},Ct=()=>{const e=Xe.c(131),{theme:l}=Ye(),r=j.useRef(null),[s,x]=at();let f;e[0]!==s?(f=s.get("color"),e[0]=s,e[1]=f):f=e[1];const k=f;let c;e[2]!==s?(c=s.get("tolerance")?parseInt(s.get("tolerance")):15,e[2]=s,e[3]=c):c=e[3];const b=c;let N;e[4]!==s?(N=s.get("lat")?parseFloat(s.get("lat")):null,e[4]=s,e[5]=N):N=e[5];const R=N;let d;e[6]!==s?(d=s.get("lng")?parseFloat(s.get("lng")):null,e[6]=s,e[7]=d):d=e[7];const h=d;let p;e[8]!==s?(p=s.get("radius")?parseInt(s.get("radius")):25,e[8]=s,e[9]=p):p=e[9];const Je=p,[n,ve]=j.useState(k),[o,Be]=j.useState(b);let se;e[10]!==R||e[11]!==h?(se=R&&h?{lat:R,lng:h}:null,e[10]=R,e[11]=h,e[12]=se):se=e[12];const[i,Se]=j.useState(se),[m,De]=j.useState(Je);let ae;e[13]===Symbol.for("react.memo_cache_sentinel")?(ae={longitude:16,latitude:48,zoom:3},e[13]=ae):ae=e[13];const[we,Qe]=j.useState(ae);let ie;e[14]===Symbol.for("react.memo_cache_sentinel")?(ie=[],e[14]=ie):ie=e[14];const[g,Ze]=j.useState(ie);let ne,ce;e[15]!==o||e[16]!==i||e[17]!==m||e[18]!==s||e[19]!==n||e[20]!==x?(ne=()=>{const a=new URLSearchParams;n&&(a.set("color",n),a.set("tolerance",o.toString())),i&&(a.set("lat",i.lat.toString()),a.set("lng",i.lng.toString()),a.set("radius",m.toString())),a.toString()?x(a,{replace:!0}):s.toString()&&x({},{replace:!0})},ce=[n,o,i,m,x,s],e[15]=o,e[16]=i,e[17]=m,e[18]=s,e[19]=n,e[20]=x,e[21]=ne,e[22]=ce):(ne=e[21],ce=e[22]),j.useEffect(ne,ce);let Ge,te;e[23]===Symbol.for("react.memo_cache_sentinel")?(te=[],it.forEach(a=>{a.images?.forEach(u=>{te.push({...u,gallery:a})})}),e[23]=te):te=e[23],Ge=te;const Ue=Ge;let re,oe;e[24]!==o||e[25]!==i||e[26]!==m||e[27]!==n?(re=()=>{let a=[...Ue];if(n){const u=Ke.find(le=>le.name===n);u&&(a=a.filter(le=>le.colorData?.dominantColors?le.colorData.dominantColors.some(Oe=>{const lt=[Number(Oe.rgb[0]),Number(Oe.rgb[1]),Number(Oe.rgb[2])];return jt(lt,u.minRgb,u.maxRgb,o)}):!1))}i&&(a=a.filter(u=>!u.latitude||!u.longitude?!1:yt(i.lat,i.lng,u.latitude,u.longitude)<=m)),Ze(a)},oe=[n,o,i,m,Ue],e[24]=o,e[25]=i,e[26]=m,e[27]=n,e[28]=re,e[29]=oe):(re=e[28],oe=e[29]),j.useEffect(re,oe);let me;e[30]===Symbol.for("react.memo_cache_sentinel")?(me=a=>{Se({lat:a.lngLat.lat,lng:a.lngLat.lng})},e[30]=me):me=e[30];const et=me;let fe;e[31]===Symbol.for("react.memo_cache_sentinel")?(fe=()=>{ve(null),Be(30),Se(null),De(5)},e[31]=fe):fe=e[31];const tt=fe;let de;e[32]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(ft,{title:"Image Filter | photos.lucamack.at",description:"Filter images by color and location"}),e[32]=de):de=e[32];const $e=`p-4 md:p-8 ${l==="dark"?"bg-black text-white":"bg-white text-black"}`,Me=`${l==="dark"?"text-white":"text-black"} mb-6`;let v;e[33]!==Me?(v=Ve(y.theme.headline.one,Me),e[33]=Me,e[34]=v):v=e[34];let S;e[35]!==v?(S=t.jsx("h1",{className:v,children:"Farb & Ort-Filter"}),e[35]=v,e[36]=S):S=e[36];let he;e[37]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(pt,{size:12}),t.jsx("h2",{className:"text-[11px] font-mono",children:"Farbfilter"})]}),e[37]=he):he=e[37];let w;e[38]!==n?(w=n&&t.jsx("button",{onClick:()=>ve(null),className:"text-xs opacity-70 hover:opacity-100","aria-label":"Clear color filter",children:t.jsx(He,{size:12})}),e[38]=n,e[39]=w):w=e[39];let $;e[40]!==w?($=t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[he,w]}),e[40]=w,e[41]=$):$=e[41];let M;e[42]!==n||e[43]!==l?(M=Ke.map(a=>t.jsx("button",{onClick:()=>ve(n===a.name?null:a.name),className:`w-full aspect-square border ${n===a.name?"ring-1 ring-offset-1 "+(l==="dark"?"ring-white":"ring-black"):""}`,style:{backgroundColor:a.hex},title:a.name,"aria-label":`Filter by ${a.name}`},a.name)),e[42]=n,e[43]=l,e[44]=M):M=e[44];let C;e[45]!==M?(C=t.jsx("div",{className:"grid grid-cols-9 gap-1 mb-4",children:M}),e[45]=M,e[46]=C):C=e[46];const Ce=`text-sm mb-1 block ${n?"":"opacity-50"}`,Fe=n?`(${o}%)`:"";let F;e[47]!==Ce||e[48]!==Fe?(F=t.jsxs("label",{className:Ce,children:["Toleranz ",Fe]}),e[47]=Ce,e[48]=Fe,e[49]=F):F=e[49];let _;e[50]!==o?(_=[o],e[50]=o,e[51]=_):_=e[51];let xe;e[52]===Symbol.for("react.memo_cache_sentinel")?(xe=a=>Be(a[0]),e[52]=xe):xe=e[52];const _e=!n;let I;e[53]!==_||e[54]!==_e?(I=t.jsx(We,{value:_,min:0,max:100,step:5,onValueChange:xe,disabled:_e}),e[53]=_,e[54]=_e,e[55]=I):I=e[55];const Ie=`flex justify-between text-xs mt-1 ${n?"":"opacity-50"}`;let ge,ue;e[56]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("span",{children:"Exakt"}),ue=t.jsx("span",{children:"Ungenau"}),e[56]=ge,e[57]=ue):(ge=e[56],ue=e[57]);let P;e[58]!==Ie?(P=t.jsxs("div",{className:Ie,children:[ge,ue]}),e[58]=Ie,e[59]=P):P=e[59];let L;e[60]!==F||e[61]!==I||e[62]!==P?(L=t.jsxs("div",{className:"mt-4",children:[F,I,P]}),e[60]=F,e[61]=I,e[62]=P,e[63]=L):L=e[63];let T;e[64]!==$||e[65]!==C||e[66]!==L?(T=t.jsxs("div",{className:`p-4 ${y.theme.border.default}`,children:[$,C,L]}),e[64]=$,e[65]=C,e[66]=L,e[67]=T):T=e[67];let be;e[68]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ut,{size:12}),t.jsx("h2",{className:"text-[11px] font-mono",children:"Ortfilter"})]}),e[68]=be):be=e[68];let z;e[69]!==i?(z=i&&t.jsx("button",{onClick:()=>Se(null),className:"text-xs opacity-70 hover:opacity-100","aria-label":"Clear location filter",children:t.jsx(He,{size:12})}),e[69]=i,e[70]=z):z=e[70];let E;e[71]!==z?(E=t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[be,z]}),e[71]=z,e[72]=E):E=e[72];let pe;e[73]===Symbol.for("react.memo_cache_sentinel")?(pe=a=>Qe(a.viewState),e[73]=pe):pe=e[73];let je;e[74]===Symbol.for("react.memo_cache_sentinel")?(je={width:"100%",height:"100%"},e[74]=je):je=e[74];const Pe=l==="dark"?y.mapbox.style.dark:y.mapbox.style.light;let A;e[75]!==i||e[76]!==l?(A=i&&t.jsx(ot,{longitude:i.lng,latitude:i.lat,anchor:"bottom",children:t.jsx("div",{className:"text-red-500",children:t.jsx("div",{className:Ve(`w-2 h-2 rotate-45 ${y.theme.border.default}`,l==="dark"?"bg-red-300":"bg-red-600")})})}),e[75]=i,e[76]=l,e[77]=A):A=e[77];let q;e[78]!==Pe||e[79]!==A||e[80]!==we?(q=t.jsx("div",{className:"h-[200px] mb-4 overflow-hidden",children:t.jsx(mt,{...we,ref:r,onMove:pe,onClick:et,style:je,mapStyle:Pe,mapboxAccessToken:y.mapbox.accessToken,children:A})}),e[78]=Pe,e[79]=A,e[80]=we,e[81]=q):q=e[81];const Le=`text-sm mb-1 block ${i?"":"opacity-50"}`,Te=i?`(${m}km)`:"";let O;e[82]!==Le||e[83]!==Te?(O=t.jsxs("label",{className:Le,children:["Radius ",Te]}),e[82]=Le,e[83]=Te,e[84]=O):O=e[84];let V;e[85]!==m?(V=[m],e[85]=m,e[86]=V):V=e[86];let ye;e[87]===Symbol.for("react.memo_cache_sentinel")?(ye=a=>De(a[0]),e[87]=ye):ye=e[87];const ze=!i;let B;e[88]!==V||e[89]!==ze?(B=t.jsx(We,{value:V,min:1,max:100,step:1,onValueChange:ye,disabled:ze}),e[88]=V,e[89]=ze,e[90]=B):B=e[90];const Ee=`flex justify-between text-xs mt-1 ${i?"":"opacity-50"}`;let ke,Ne;e[91]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx("span",{children:"1km"}),Ne=t.jsx("span",{children:"100km"}),e[91]=ke,e[92]=Ne):(ke=e[91],Ne=e[92]);let D;e[93]!==Ee?(D=t.jsxs("div",{className:Ee,children:[ke,Ne]}),e[93]=Ee,e[94]=D):D=e[94];let G;e[95]!==O||e[96]!==B||e[97]!==D?(G=t.jsxs("div",{className:"mt-4",children:[O,B,D]}),e[95]=O,e[96]=B,e[97]=D,e[98]=G):G=e[98];let U;e[99]!==E||e[100]!==q||e[101]!==G?(U=t.jsxs("div",{className:`p-4 ${y.theme.border.default}`,children:[E,q,G]}),e[99]=E,e[100]=q,e[101]=G,e[102]=U):U=e[102];const Ae=g.length===1?"Foto":"Fotos";let H;e[103]!==g.length||e[104]!==Ae?(H=t.jsxs("span",{className:"text-[11px] font-mono",children:[g.length," ",Ae," gefunden"]}),e[103]=g.length,e[104]=Ae,e[105]=H):H=e[105];const qe=`px-4 py-2 text-sm ${y.theme.border.default} `;let K;e[106]!==qe?(K=t.jsx("button",{onClick:tt,className:qe,children:"Alle Filter löschen"}),e[106]=qe,e[107]=K):K=e[107];let W;e[108]!==H||e[109]!==K?(W=t.jsxs("div",{className:"flex justify-between items-center pt-2",children:[H,K]}),e[108]=H,e[109]=K,e[110]=W):W=e[110];let X;e[111]!==T||e[112]!==U||e[113]!==W?(X=t.jsxs("div",{className:"space-y-6 md:sticky md:top-8 md:self-start",children:[T,U,W]}),e[111]=T,e[112]=U,e[113]=W,e[114]=X):X=e[114];let Y;e[115]!==g?(Y=g.map(kt),e[115]=g,e[116]=Y):Y=e[116];let J;e[117]!==Y?(J=t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:Y}),e[117]=Y,e[118]=J):J=e[118];let Q;e[119]!==g.length?(Q=g.length===0&&t.jsxs("div",{className:"",children:[t.jsx("p",{className:"text-lg mb-2",children:"Keine Fotos für die Filter gefunden"}),t.jsx("p",{className:"text-sm opacity-70",children:"Versuche die Filter kritierien zu verändern"})]}),e[119]=g.length,e[120]=Q):Q=e[120];let Z;e[121]!==J||e[122]!==Q?(Z=t.jsxs("div",{children:[J,Q]}),e[121]=J,e[122]=Q,e[123]=Z):Z=e[123];let ee;e[124]!==X||e[125]!==Z?(ee=t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[clamp(200px,22.5vw,400px)_1fr] gap-6",children:[X,Z]}),e[124]=X,e[125]=Z,e[126]=ee):ee=e[126];let Re;return e[127]!==$e||e[128]!==S||e[129]!==ee?(Re=t.jsxs("div",{className:"min-h-screen w-full",children:[de,t.jsxs("div",{className:$e,children:[S,ee]})]}),e[127]=$e,e[128]=S,e[129]=ee,e[130]=Re):Re=e[130],Re},We=e=>{const l=Xe.c(15),{theme:r}=Ye(),{disabled:s}=e,x=`relative flex items-center select-none touch-none w-full h-5 ${s?"opacity-50":""}`,f=`${s?"":"cursor-pointer"} relative grow h-[3px] ${r==="dark"?"bg-neutral-700":"bg-neutral-200"}`,k=`absolute h-full ${r==="dark"?"bg-white":"bg-black"}`;let c;l[0]!==k?(c=t.jsx(ht,{className:k}),l[0]=k,l[1]=c):c=l[1];let b;l[2]!==f||l[3]!==c?(b=t.jsx(xt,{className:f,children:c}),l[2]=f,l[3]=c,l[4]=b):b=l[4];const N=s?"cursor-default":"cursor-grab active:cursor-grabbing",R=r==="dark"?"bg-white border-white focus:ring-offset-black focus:ring-red-300":"bg-black border-black focus:ring-offset-white focus:ring-red-600";let d;l[5]!==N||l[6]!==R?(d=Ve(N,"block w-4 h-4 border-2 focus:outline-none focus:ring-2 focus:ring-offset-2",R),l[5]=N,l[6]=R,l[7]=d):d=l[7];let h;l[8]!==d?(h=t.jsx(gt,{className:d,"aria-label":"Adjust value"}),l[8]=d,l[9]=h):h=l[9];let p;return l[10]!==e||l[11]!==x||l[12]!==b||l[13]!==h?(p=t.jsxs(dt,{className:x,...e,children:[b,h]}),l[10]=e,l[11]=x,l[12]=b,l[13]=h,l[14]=p):p=l[14],p};function kt(e){return t.jsxs(nt,{to:`/gallery/${e.gallery.slug}/image/${ct(e.filename.replace(/\.[^/.]+$/,""))}`,className:`block overflow-hidden ${y.theme.border.default}`,children:[t.jsx("div",{className:"aspect-square overflow-hidden",children:t.jsx("img",{src:rt(e.gallery.slug,e.filename.replaceAll(" ","_"),380),alt:e.alt||e.filename.replaceAll("_"," ").replace(/\.[^/.]+$/,""),className:"w-full h-full object-cover",loading:"lazy"})}),t.jsxs("div",{className:"p-3",children:[t.jsx("h3",{className:"text-sm truncate",children:e.filename.replaceAll("_"," ").replace(/\.[^/.]+$/,"")}),t.jsx("p",{className:"text-xs opacity-70 truncate mt-1",children:e.gallery.title})]})]},`${e.gallery.slug}-${e.filename}`)}export{Ct as default};
