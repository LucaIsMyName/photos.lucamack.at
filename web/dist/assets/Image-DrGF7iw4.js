import{r as m,c as G,e as J,b as K,a as P,j as U}from"./index-DbtzoCXS.js";var H=new Map,z=new WeakMap,q=0,Q=void 0;function X(t){return t?(z.has(t)||(q+=1,z.set(t,q.toString())),z.get(t)):"0"}function Y(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?X(t.root):t[e]}`).toString()}function Z(t){const e=Y(t);let o=H.get(e);if(!o){const r=new Map;let g;const a=new IntersectionObserver(l=>{l.forEach(s=>{var n;const v=s.isIntersecting&&g.some(c=>s.intersectionRatio>=c);t.trackVisibility&&typeof s.isVisible>"u"&&(s.isVisible=v),(n=r.get(s.target))==null||n.forEach(c=>{c(v,s)})})},t);g=a.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),o={id:e,observer:a,elements:r},H.set(e,o)}return o}function k(t,e,o={},r=Q){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const n=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:typeof o.threshold=="number"?o.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:g,observer:a,elements:l}=Z(o),s=l.get(t)||[];return l.has(t)||l.set(t,s),s.push(e),a.observe(t),function(){s.splice(s.indexOf(e),1),s.length===0&&(l.delete(t),a.unobserve(t)),l.size===0&&(a.disconnect(),H.delete(g))}}function ee({threshold:t,delay:e,trackVisibility:o,rootMargin:r,root:g,triggerOnce:a,skip:l,initialInView:s,fallbackInView:n,onChange:v}={}){var c;const[u,x]=m.useState(null),$=m.useRef(v),[p,d]=m.useState({inView:!!s,entry:void 0});$.current=v,m.useEffect(()=>{if(l||!u)return;let f;return f=k(u,(E,j)=>{d({inView:E,entry:j}),$.current&&$.current(E,j),j.isIntersecting&&a&&f&&(f(),f=void 0)},{root:g,rootMargin:r,threshold:t,trackVisibility:o,delay:e},n),()=>{f&&f()}},[Array.isArray(t)?t.toString():t,u,g,r,a,l,o,n,e]);const b=(c=p.entry)==null?void 0:c.target,y=m.useRef(void 0);!u&&b&&!a&&!l&&y.current!==b&&(y.current=b,d({inView:!!s,entry:void 0}));const h=[x,p.inView,p.entry];return h.ref=h[0],h.inView=h[1],h.entry=h[2],h}const te=[380,640,1440],ne=t=>{const e=G.c(38),{id:o,src:r,loading:g,alt:a,className:l,style:s,onImageLoad:n,sizes:v,width:c,height:u}=t,x=o===void 0?"":o,{theme:$}=J();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={triggerOnce:!0,threshold:.1},e[0]=p):p=e[0];const{ref:d,inView:b}=ee(p),[y,h]=m.useState(null),[f,E]=m.useState(null),[j,D]=m.useState(!1);let _;if(e[1]!==r){const i=r.split("/").pop()||"",I=r.split("/")[3];_=te.map(R=>`${K(I,i.replaceAll(" ","_"),R)} ${R}w`).join(", "),e[1]=r,e[2]=_}else _=e[2];const M=_;let A,T;if(e[3]!==b||e[4]!==r?(A=()=>b?((async()=>{try{h(r)}catch(I){console.error("Image loading or conversion failed:",I),E("Failed to load image.")}})(),se):void 0,T=[r,b],e[3]=b,e[4]=r,e[5]=A,e[6]=T):(A=e[5],T=e[6]),m.useEffect(A,T),f){let i;return e[7]!==f||e[8]!==d?(i=U.jsx("div",{ref:d,className:"w-full aspect-[4/3] flex items-center justify-center bg-gray-200 text-red-500 font-medium",children:f}),e[7]=f,e[8]=d,e[9]=i):i=e[9],i}let L;e[10]!==n?(L=i=>{D(!0),n&&n({width:i.currentTarget.naturalWidth,height:i.currentTarget.naturalHeight})},e[10]=n,e[11]=L):L=e[11];const B=L;if(!y){let i;e[12]!==u||e[13]!==c?(i=c&&u?{aspectRatio:`${c} / ${u}`}:{aspectRatio:"4 / 3"},e[12]=u,e[13]=c,e[14]=i):i=e[14];const I=i,R=`w-full h-auto ${$==="dark"?"bg-white/10":"bg-black/10"}`;let S;e[15]!==R?(S=P(R),e[15]=R,e[16]=S):S=e[16];let O;return e[17]!==I||e[18]!==d||e[19]!==S?(O=U.jsx("div",{ref:d,style:I,className:S}),e[17]=I,e[18]=d,e[19]=S,e[20]=O):O=e[20],O}let N;e[21]!==y?(N=y.replaceAll(" ","_"),e[21]=y,e[22]=N):N=e[22];const W=encodeURI(N),C=g!==void 0?g:"lazy",F=`${l} transition-opacity duration-300 ease-in ${j?"opacity-100":"opacity-0"}`;let w;e[23]!==a||e[24]!==B||e[25]!==u||e[26]!==x||e[27]!==v||e[28]!==M||e[29]!==s||e[30]!==F||e[31]!==W||e[32]!==C||e[33]!==c?(w=U.jsx("img",{id:x,src:W,srcSet:M,sizes:v,alt:a,width:c,height:u,loading:C,className:F,style:s,onLoad:B}),e[23]=a,e[24]=B,e[25]=u,e[26]=x,e[27]=v,e[28]=M,e[29]=s,e[30]=F,e[31]=W,e[32]=C,e[33]=c,e[34]=w):w=e[34];let V;return e[35]!==d||e[36]!==w?(V=U.jsx("div",{ref:d,className:"w-full h-full",children:w}),e[35]=d,e[36]=w,e[37]=V):V=e[37],V};function se(){}export{ne as I};
