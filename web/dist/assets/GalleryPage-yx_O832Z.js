import{c as b,r as F,j as t,L as M,u as C,g as L,a as S}from"./index-CedDT628.js";import{k as E}from"./marked.esm-DJbTXz-_.js";import{I as A}from"./Image-QMq61Y0k.js";import{g as p}from"./image-CpkqAB9L.js";import{C as i}from"./config-BUEk0qKv.js";import"./mapbox-gl-CNTiHEyl.js";import"./cn-CBfrqCZ4.js";const U=x=>{const e=b.c(18),{alt:o,gallerySlug:m,imageFilename:s}=x,[n,l]=F.useState(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=f=>{f.width>f.height?l("landscape"):f.height>f.width?l("portrait"):l("square")},e[0]=r):r=e[0];const a=r;let u;e[1]!==n?(u=()=>{if(!n)return"w-full md:w-1/2";switch(n){case"landscape":return"w-full md:w-full";case"portrait":case"square":default:return"w-full md:w-1/2"}},e[1]=n,e[2]=u):u=e[2];const I=u,j=n==="landscape"?"(min-width: 1024px) 1024px, 100vw":"(min-width: 1024px) 512px, (min-width: 768px) 50vw, 100vw",w=`image-${s.split(".")[0]}`,y=I(),$=`/image/${s.replace(/\.[^/.]+$/,"")}`;let c;e[3]!==m||e[4]!==s?(c=p(m,s),e[3]=m,e[4]=s,e[5]=c):c=e[5];const N=o||"",v=n==="landscape"?427:n==="portrait"?960:640;let d;e[6]!==j||e[7]!==c||e[8]!==N||e[9]!==v?(d=t.jsx(A,{src:c,alt:N,width:640,height:v,onImageLoad:a,sizes:j,loading:"lazy",className:"w-full h-auto block"}),e[6]=j,e[7]=c,e[8]=N,e[9]=v,e[10]=d):d=e[10];let g;e[11]!==$||e[12]!==d?(g=t.jsx("div",{className:"p-0 lg:pr-4 sm:pb-4 md:py-6",children:t.jsx(M,{to:$,className:"block",children:d})}),e[11]=$,e[12]=d,e[13]=g):g=e[13];let h;return e[14]!==g||e[15]!==w||e[16]!==y?(h=t.jsx("div",{id:w,className:y,children:g}),e[14]=g,e[15]=w,e[16]=y,e[17]=h):h=e[17],h},z=()=>{const{slug:x}=C(),e=L.find(s=>s.slug===x),o=S(),m=F.useMemo(()=>e?.images?[...e.images].sort(()=>Math.random()-.5):[],[e]);return F.useEffect(()=>{let n=new URLSearchParams(o.search).get("image");if(!n&&o.hash){const l=o.hash.substring(1);n=l.startsWith("image-")?l.replace("image-",""):l}if(n){const l=`image-${n.split(".")[0]}`;setTimeout(()=>{const r=document.getElementById(l);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},150)}if(e&&e.images){const l=document.createElement("script");l.type="application/ld+json",l.id="gallery-structured-data";const r=e.images.filter(a=>a.latitude&&a.longitude&&a.googleMapsUrl).map(a=>({"@context":"https://schema.org","@type":"ImageObject",name:a.filename,description:a.alt||`A photo from the gallery: ${e.title}`,contentUrl:`${i.url}${p(e.slug,encodeURI(a.filename.replaceAll(" ","_")),"original")}`,author:{"@type":"Person",name:i.meta.title},location:{"@type":"Place",geo:{"@type":"GeoCoordinates",latitude:a.latitude,longitude:a.longitude},sameAs:a.googleMapsUrl}}));return l.innerHTML=JSON.stringify(r),document.head.appendChild(l),()=>{const a=document.getElementById("gallery-structured-data");a&&document.head.removeChild(a)}}},[o,e]),e?t.jsxs("div",{children:[t.jsx("title",{children:`Fotoserie: ${e.title||e.name} | ${i.meta.title}`}),t.jsx("meta",{name:"description",content:e.description||`Fotoserie: ${e.title||e.name}.`}),t.jsx("meta",{name:"title",content:`Fotoserie: ${e.title||e.name}`}),t.jsx("meta",{name:"image",content:`${i.url}${p(e.slug,e.images[Math.floor(Math.random()*e.images.length)].filename,640)}`}),t.jsx("meta",{name:"og:image",content:`${i.url}${p(e.slug,e.images[Math.floor(Math.random()*e.images.length)].filename,640)}`}),t.jsx("meta",{name:"og:title",content:`Fotoserie: ${e.title||e.name}`}),t.jsx("meta",{name:"og:description",content:e.description||`Fotoserie: ${e.title||e.name}.`}),t.jsx("meta",{name:"og:url",content:`${i.url}${p(e.slug,e.images[Math.floor(Math.random()*e.images.length)].filename,640)}`}),t.jsxs("div",{className:"px-4 md:px-0",children:[t.jsxs("div",{className:"flex flex-col items-start",children:[t.jsx("h1",{className:`${i.theme.headline.one} w-full max-w-[560px] text-wrap-balance md:pt-8 pt-6 pb-4  `,children:e.title||e.name}),e.description&&t.jsx("div",{className:"w-full max-w-[calc(var(--content-width)/2)] text-wrap-balance text-sm md:text-lg leading-8 my-4 pb-4 leading-tight",dangerouslySetInnerHTML:{__html:E(e.description)}})]}),m.length>0?t.jsx("div",{className:"max-w-[var(--content-width)] lg:pr-4 flex flex-wrap justify-center items-center gap-8 md:gap-0 pb-4",children:m.map(s=>t.jsx(U,{alt:`${s.filename.replaceAll("_"," ").replace(".jpg","").trim()}`,gallerySlug:e.slug,imageFilename:s.filename},s.filename))}):t.jsx("p",{className:"text-left",children:i.systemMessages.noImagesFound}),e.timeframe||e.imageCount?t.jsx("div",{className:"max-w-[calc(1024px)] flex w-full  my-8 py-8 flex flex-col md:flex-row justify-between items-center text-sm",children:t.jsxs("div",{className:"text-left flex justify-center gap-4 w-full",children:[e.timeframe?t.jsxs("p",{children:[e.timeframe," "]}):t.jsx("p",{children:"N/A"})," | ",e.imageCount?t.jsxs("p",{children:[e.imageCount," Fotos"]}):t.jsx("p",{children:"N/A"})]})}):null]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("title",{children:["Fotoserien nicht gefunden | ",i.meta.title]}),t.jsx("meta",{name:"description",content:"Fotoserien nicht gefunden"}),t.jsx("h1",{children:"Fotoserie nicht gefunden"}),t.jsx("div",{className:"text-lg py-6 text-left",children:i.systemMessages.noGalleryFound})]})};export{z as default};
