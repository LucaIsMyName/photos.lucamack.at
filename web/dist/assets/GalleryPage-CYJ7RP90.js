import{c as L,r as N,s as b,b as f,j as t,L as D,u as M,g as O,d as T,C as o,p as F}from"./index-DREUeRPA.js";import{k as A}from"./marked.esm-DJbTXz-_.js";import{I as k}from"./Image-Co7PYWxK.js";import{C as P}from"./CopyButton-BpLD2FDB.js";import U from"./NotFoundPage-IDGe5uep.js";import"./mapbox-gl-CNTiHEyl.js";import"./check-B8umwKmq.js";import"./Href-B0xaadmF.js";const E=x=>{const e=L.c(19),{alt:i,gallerySlug:c,imageFilename:n}=x,[s,l]=N.useState(null);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=u=>{u.width>u.height?l("landscape"):u.height>u.width?l("portrait"):l("square")},e[0]=r):r=e[0];const a=r;let g;e[1]!==s?(g=()=>{if(!s)return"w-full md:w-1/2 flex-grow-1 max-w-[calc(var(--content-width)/1.5)]";switch(s){case"landscape":return"w-full md:w-full";case"portrait":case"square":default:return"w-full md:w-1/2 flex-grow-1 max-w-[calc(var(--content-width)/1.5)]"}},e[1]=s,e[2]=g):g=e[2];const C=g,w=s==="landscape"?"(min-width: 1024px) 1024px, 100vw":"(min-width: 1024px) 512px, (min-width: 768px) 50vw, 100vw",S=n.replace(/\.[^/.]+$/,""),j=`/gallery/${c}/image/${b(S)}`,y=`${b(S)}`,I=C(),v=`Link zum Foto: ${i}`;let m;e[3]!==c||e[4]!==n?(m=f(c,n),e[3]=c,e[4]=n,e[5]=m):m=e[5];const $=s==="landscape"?427:s==="portrait"?960:640;let d;e[6]!==i||e[7]!==w||e[8]!==m||e[9]!==$?(d=t.jsx(k,{src:m,alt:i,width:640,height:$,onImageLoad:a,sizes:w,loading:"lazy",className:"w-full h-auto block"}),e[6]=i,e[7]=w,e[8]=m,e[9]=$,e[10]=d):d=e[10];let p;e[11]!==j||e[12]!==v||e[13]!==d?(p=t.jsx("div",{className:"p-0 pr-0 lg:pr-4 sm:pb-4 md:pr-4 md:py-6",children:t.jsx(D,{title:v,to:j,className:"block",children:d})}),e[11]=j,e[12]=v,e[13]=d,e[14]=p):p=e[14];let h;return e[15]!==y||e[16]!==I||e[17]!==p?(h=t.jsx("div",{id:y,className:I,children:p}),e[15]=y,e[16]=I,e[17]=p,e[18]=h):h=e[18],h},V=()=>{const{slug:x}=M(),e=O.find(n=>n.slug===x),i=T(),c=N.useMemo(()=>e?.images?[...e.images].sort(()=>Math.random()-.5):[],[e]);return N.useEffect(()=>{let s=new URLSearchParams(i.search).get("image");if(!s&&i.hash){const l=i.hash.substring(1);s=l.startsWith("image-")?l.replace("image-",""):l}if(s){const l=`image-${s.split(".")[0]}`;setTimeout(()=>{const r=document.getElementById(l);r&&r.scrollIntoView({behavior:"smooth",block:"center"})},150)}if(e&&e.images){const l=document.createElement("script");l.type="application/ld+json",l.id="gallery-structured-data";const r=e.images.filter(a=>a.latitude&&a.longitude).map(a=>({"@context":"https://schema.org","@type":"ImageObject",name:a.filename.replaceAll("_"," ").replace(".jpg","").trim(),description:`A photo from the gallery: ${e.title}`,contentUrl:`${o.url}${f(e.slug,encodeURI(a.filename.replaceAll(" ","_")),"original")}`,width:"1920",height:"1080",datePublished:a.createDate?F(a.createDate)?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]:new Date().toISOString().split("T")[0],dateCreated:a.createDate?F(a.createDate)?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]:new Date().toISOString().split("T")[0],author:{"@type":"Person",name:o.author,url:o.url},copyrightHolder:{"@type":"Person",name:o.author},license:"https://creativecommons.org/licenses/by-nc/4.0/",geo:{"@type":"GeoCoordinates",latitude:a.latitude,longitude:a.longitude},...a.googleMapsUrl&&{sameAs:a.googleMapsUrl}}));return l.innerHTML=JSON.stringify(r),document.head.appendChild(l),()=>{const a=document.getElementById("gallery-structured-data");a&&document.head.removeChild(a)}}},[i,e]),e?t.jsxs("div",{children:[t.jsx("title",{children:`Fotoserie: ${e.title||e.name} | ${o.meta.title}`}),t.jsx("meta",{name:"description",content:e.description||`Fotoserie: ${e.title||e.name}.`}),t.jsx("meta",{name:"title",content:`Fotoserie: ${e.title||e.name}`}),t.jsx("meta",{name:"image",content:`${o.url}${f(e.slug,encodeURI(e.images[Math.floor(Math.random()*e.images.length)].filename.replaceAll(" ","_")),1440)}`}),t.jsx("meta",{name:"og:image",content:`${o.url}${f(e.slug,encodeURI(e.images[Math.floor(Math.random()*e.images.length)].filename.replaceAll(" ","_")),1440)}`}),t.jsx("meta",{name:"og:title",content:`Fotoserie: ${e.title||e.name}`}),t.jsx("meta",{name:"og:description",content:e.description||`Fotoserie: ${e.title||e.name}.`}),t.jsx("meta",{name:"og:type",content:"website"}),t.jsxs("div",{className:"px-4  md:pl-8 md:px-0",children:[t.jsxs("div",{className:"flex flex-col items-start",children:[t.jsx("h1",{className:`${o.theme.headline.one} w-full max-w-[calc(var(--content-width)/(21/13))] text-wrap-balance md:pt-8 pt-6 pb-4  `,children:e.title||e.name}),e.description&&t.jsx("div",{className:"w-full max-w-[calc(var(--content-width)/(21/13))] text-wrap-balance text-sm md:text-lg leading-8 my-4 pb-4 leading-tight",dangerouslySetInnerHTML:{__html:A(e.description)}})]}),c.length>0?t.jsx("div",{className:"md:max-w-[calc(var(--content-width))] lg:pr-4 flex flex-wrap justify-center items-center gap-8 md:gap-0 pb-4",children:c.map(n=>t.jsx(E,{alt:`${n.filename.replaceAll("_"," ").replace(".jpg","").trim()}`,gallerySlug:e.slug,imageFilename:n.filename},n.filename))}):t.jsx("p",{className:"text-left",children:"Keine Fotos in der Serie gefunden"}),t.jsxs("div",{className:"md:max-w-[calc(var(--content-width))] w-full gap-4 my-8 py-8 flex flex-col justify-between items-center text-sm",children:[e.timeframe||e.imageCount?t.jsxs("div",{className:"text-left flex justify-center gap-4 w-full",children:[e.timeframe?t.jsxs("p",{children:[e.timeframe," "]}):t.jsx("p",{children:"N/A"})," | ",e.imageCount?t.jsxs("p",{children:[e.imageCount," Fotos"]}):t.jsx("p",{children:"N/A"})]}):null,t.jsx("div",{className:"flex justify-center",children:t.jsx(P,{textToCopy:window.location.href,children:t.jsx("span",{className:"font-mono",children:"Link Kopieren"})})})]})]})]}):t.jsxs(t.Fragment,{children:[t.jsxs("title",{children:["Fotoserien nicht gefunden | ",o.meta.title]}),t.jsx("meta",{name:"description",content:"Fotoserien nicht gefunden"}),t.jsx(U,{})]})};export{V as default};
