import{h as le,r as M,c as ce,a as R,j as g,X as J,u as ue,i as he,g as P,s as Y,b as Q,C as $,L as de}from"./index-C7nXu86p.js";import{M as pe,a as W,P as ge}from"./scale-control-DmKbEn1L.js";import"./mapbox-gl-CNTiHEyl.js";import{H as fe}from"./Href-BjRyhzg2.js";import{E as me}from"./eye-B3mjhnSA.js";import{S as ye}from"./SeoHead-C-mIlNmw.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],we=le("layers",xe),q=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],D=1,C=8;class V{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,s]=new Uint8Array(e,0,2);if(t!==219)throw new Error("Data does not appear to be in a KDBush format.");const i=s>>4;if(i!==D)throw new Error(`Got v${i} data when expected v${D}.`);const o=q[s&15];if(!o)throw new Error("Unrecognized array type.");const[l]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new V(a,l,o,e)}constructor(e,t=64,s=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=s,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const o=q.indexOf(this.ArrayType),l=e*2*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,n=(8-a%8)%8;if(o<0)throw new Error(`Unexpected typed array class: ${s}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,C,e),this.coords=new this.ArrayType(this.data,C+a+n,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(C+l+a+n),this.ids=new this.IndexArrayType(this.data,C,e),this.coords=new this.ArrayType(this.data,C+a+n,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(D<<4)+o]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const s=this._pos>>1;return this.ids[s]=s,this.coords[this._pos++]=e,this.coords[this._pos++]=t,s}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return K(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,s,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:l,nodeSize:a}=this,n=[0,o.length-1,0],u=[];for(;n.length;){const h=n.pop()||0,c=n.pop()||0,d=n.pop()||0;if(c-d<=a){for(let y=d;y<=c;y++){const _=l[2*y],A=l[2*y+1];_>=e&&_<=s&&A>=t&&A<=i&&u.push(o[y])}continue}const p=d+c>>1,x=l[2*p],f=l[2*p+1];x>=e&&x<=s&&f>=t&&f<=i&&u.push(o[p]),(h===0?e<=x:t<=f)&&(n.push(d),n.push(p-1),n.push(1-h)),(h===0?s>=x:i>=f)&&(n.push(p+1),n.push(c),n.push(1-h))}return u}within(e,t,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:l}=this,a=[0,i.length-1,0],n=[],u=s*s;for(;a.length;){const h=a.pop()||0,c=a.pop()||0,d=a.pop()||0;if(c-d<=l){for(let y=d;y<=c;y++)X(o[2*y],o[2*y+1],e,t)<=u&&n.push(i[y]);continue}const p=d+c>>1,x=o[2*p],f=o[2*p+1];X(x,f,e,t)<=u&&n.push(i[p]),(h===0?e-s<=x:t-s<=f)&&(a.push(d),a.push(p-1),a.push(1-h)),(h===0?e+s>=x:t+s>=f)&&(a.push(p+1),a.push(c),a.push(1-h))}return n}}function K(r,e,t,s,i,o){if(i-s<=t)return;const l=s+i>>1;ie(r,e,l,s,i,o),K(r,e,t,s,l-1,1-o),K(r,e,t,l+1,i,1-o)}function ie(r,e,t,s,i,o){for(;i>s;){if(i-s>600){const u=i-s+1,h=t-s+1,c=Math.log(u),d=.5*Math.exp(2*c/3),p=.5*Math.sqrt(c*d*(u-d)/u)*(h-u/2<0?-1:1),x=Math.max(s,Math.floor(t-h*d/u+p)),f=Math.min(i,Math.floor(t+(u-h)*d/u+p));ie(r,e,t,x,f,o)}const l=e[2*t+o];let a=s,n=i;for(O(r,e,s,t),e[2*i+o]>l&&O(r,e,s,i);a<n;){for(O(r,e,a,n),a++,n--;e[2*a+o]<l;)a++;for(;e[2*n+o]>l;)n--}e[2*s+o]===l?O(r,e,s,n):(n++,O(r,e,n,i)),n<=t&&(s=n+1),t<=n&&(i=n-1)}}function O(r,e,t,s){G(r,t,s),G(e,2*t,2*s),G(e,2*t+1,2*s+1)}function G(r,e,t){const s=r[e];r[e]=r[t],r[t]=s}function X(r,e,t,s){const i=r-t,o=e-s;return i*i+o*o}const be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:r=>r},ee=Math.fround||(r=>e=>(r[0]=+e,r[0]))(new Float32Array(1)),k=2,L=3,H=4,S=5,re=6;class _e{constructor(e){this.options=Object.assign(Object.create(be),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:s,maxZoom:i}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;const l=[];for(let n=0;n<e.length;n++){const u=e[n];if(!u.geometry)continue;const[h,c]=u.geometry.coordinates,d=ee(z(h)),p=ee(Z(c));l.push(d,p,1/0,n,-1,1),this.options.reduce&&l.push(0)}let a=this.trees[i+1]=this._createTree(l);t&&console.timeEnd(o);for(let n=i;n>=s;n--){const u=+Date.now();a=this.trees[n]=this._createTree(this._cluster(a,n)),t&&console.log("z%d: %d clusters in %dms",n,a.numItems,+Date.now()-u)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let s=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let o=e[2]===180?180:((e[2]+180)%360+360)%360-180;const l=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)s=-180,o=180;else if(s>o){const c=this.getClusters([s,i,180,l],t),d=this.getClusters([-180,i,o,l],t);return c.concat(d)}const a=this.trees[this._limitZoom(t)],n=a.range(z(s),Z(l),z(o),Z(i)),u=a.data,h=[];for(const c of n){const d=this.stride*c;h.push(u[d+S]>1?te(u,d,this.clusterProps):this.points[u[d+L]])}return h}getChildren(e){const t=this._getOriginId(e),s=this._getOriginZoom(e),i="No cluster with the specified id.",o=this.trees[s];if(!o)throw new Error(i);const l=o.data;if(t*this.stride>=l.length)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,s-1)),n=l[t*this.stride],u=l[t*this.stride+1],h=o.within(n,u,a),c=[];for(const d of h){const p=d*this.stride;l[p+H]===e&&c.push(l[p+S]>1?te(l,p,this.clusterProps):this.points[l[p+L]])}if(c.length===0)throw new Error(i);return c}getLeaves(e,t,s){t=t||10,s=s||0;const i=[];return this._appendLeaves(i,e,t,s,0),i}getTile(e,t,s){const i=this.trees[this._limitZoom(e)],o=Math.pow(2,e),{extent:l,radius:a}=this.options,n=a/l,u=(s-n)/o,h=(s+1+n)/o,c={features:[]};return this._addTileFeatures(i.range((t-n)/o,u,(t+1+n)/o,h),i.data,t,s,o,c),t===0&&this._addTileFeatures(i.range(1-n/o,u,1,h),i.data,o,s,o,c),t===o-1&&this._addTileFeatures(i.range(0,u,n/o,h),i.data,-1,s,o,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const s=this.getChildren(e);if(t++,s.length!==1)break;e=s[0].properties.cluster_id}return t}_appendLeaves(e,t,s,i,o){const l=this.getChildren(t);for(const a of l){const n=a.properties;if(n&&n.cluster?o+n.point_count<=i?o+=n.point_count:o=this._appendLeaves(e,n.cluster_id,s,i,o):o<i?o++:e.push(a),e.length===s)break}return o}_createTree(e){const t=new V(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let s=0;s<e.length;s+=this.stride)t.add(e[s],e[s+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,s,i,o,l){for(const a of e){const n=a*this.stride,u=t[n+S]>1;let h,c,d;if(u)h=oe(t,n,this.clusterProps),c=t[n],d=t[n+1];else{const f=this.points[t[n+L]];h=f.properties;const[y,_]=f.geometry.coordinates;c=z(y),d=Z(_)}const p={type:1,geometry:[[Math.round(this.options.extent*(c*o-s)),Math.round(this.options.extent*(d*o-i))]],tags:h};let x;u||this.options.generateId?x=t[n+L]:x=this.points[t[n+L]].id,x!==void 0&&(p.id=x),l.features.push(p)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:s,extent:i,reduce:o,minPoints:l}=this.options,a=s/(i*Math.pow(2,t)),n=e.data,u=[],h=this.stride;for(let c=0;c<n.length;c+=h){if(n[c+k]<=t)continue;n[c+k]=t;const d=n[c],p=n[c+1],x=e.within(n[c],n[c+1],a),f=n[c+S];let y=f;for(const _ of x){const A=_*h;n[A+k]>t&&(y+=n[A+S])}if(y>f&&y>=l){let _=d*f,A=p*f,E,F=-1;const I=((c/h|0)<<5)+(t+1)+this.points.length;for(const m of x){const b=m*h;if(n[b+k]<=t)continue;n[b+k]=t;const w=n[b+S];_+=n[b]*w,A+=n[b+1]*w,n[b+H]=I,o&&(E||(E=this._map(n,c,!0),F=this.clusterProps.length,this.clusterProps.push(E)),o(E,this._map(n,b)))}n[c+H]=I,u.push(_/y,A/y,1/0,I,-1,y),o&&u.push(F)}else{for(let _=0;_<h;_++)u.push(n[c+_]);if(y>1)for(const _ of x){const A=_*h;if(!(n[A+k]<=t)){n[A+k]=t;for(let E=0;E<h;E++)u.push(n[A+E])}}}}return u}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,s){if(e[t+S]>1){const l=this.clusterProps[e[t+re]];return s?Object.assign({},l):l}const i=this.points[e[t+L]].properties,o=this.options.map(i);return s&&o===i?Object.assign({},o):o}}function te(r,e,t){return{type:"Feature",id:r[e+L],properties:oe(r,e,t),geometry:{type:"Point",coordinates:[Me(r[e]),Ae(r[e+1])]}}}function oe(r,e,t){const s=r[e+S],i=s>=1e4?`${Math.round(s/1e3)}k`:s>=1e3?`${Math.round(s/100)/10}k`:s,o=r[e+re],l=o===-1?{}:Object.assign({},t[o]);return Object.assign(l,{cluster:!0,cluster_id:r[e+L],point_count:s,point_count_abbreviated:i})}function z(r){return r/360+.5}function Z(r){const e=Math.sin(r*Math.PI/180),t=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return t<0?0:t>1?1:t}function Me(r){return(r-.5)*360}function Ae(r){const e=(180-r*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}var se=Object.prototype.hasOwnProperty;function ne(r,e,t){for(t of r.keys())if(N(t,e))return t}function N(r,e){var t,s,i;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((s=r.length)===e.length)for(;s--&&N(r[s],e[s]););return s===-1}if(t===Set){if(r.size!==e.size)return!1;for(s of r)if(i=s,i&&typeof i=="object"&&(i=ne(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(s of r)if(i=s[0],i&&typeof i=="object"&&(i=ne(e,i),!i)||!N(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((s=r.byteLength)===e.byteLength)for(;s--&&r.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(r)){if((s=r.byteLength)===e.byteLength)for(;s--&&r[s]===e[s];);return s===-1}if(!t||typeof r=="object"){s=0;for(t in r)if(se.call(r,t)&&++s&&!se.call(e,t)||!(t in e)||!N(r[t],e[t]))return!1;return Object.keys(e).length===s}}return r!==r&&e!==e}function Ee(r){var e=M.useRef(r),t=M.useRef(0);return N(r,e.current)||(e.current=r,t.current+=1),M.useMemo(function(){return e.current},[t.current])}function je(r,e){return M.useEffect(r,Ee(e))}var ve=function(e){var t=e.points,s=e.bounds,i=e.zoom,o=e.options,l=e.disableRefresh,a=M.useRef(),n=M.useRef(),u=M.useState([]),h=u[0],c=u[1],d=Math.round(i);return je(function(){l!==!0&&((!a.current||!N(n.current,t)||!N(a.current.options,o))&&(a.current=new _e(o),a.current.load(t)),s&&c(a.current.getClusters(s,d)),n.current=t)},[t,s,d,o,l]),{clusters:h,supercluster:a.current}};const Se=r=>{const e=ce.c(23),{galleryColors:t,legendToggleRef:s,setIsLegendOpen:i,isLegendOpen:o,legendRef:l,theme:a,galleries:n,hiddenGalleries:u,handleLegendToggle:h}=r;let c;e[0]!==o||e[1]!==i?(c=()=>i(!o),e[0]=o,e[1]=i,e[2]=c):c=e[2];const d=a==="dark"?"bg-black text-white":"bg-white text-black";let p;e[3]!==d?(p=R("border gap-2 z-50 absolute top-4 right-4 p-2 flex items-center",d),e[3]=d,e[4]=p):p=e[4];let x,f;e[5]===Symbol.for("react.memo_cache_sentinel")?(x=g.jsx("span",{className:"text-xs ml-1",children:"Legende"}),f=g.jsx(we,{size:16}),e[5]=x,e[6]=f):(x=e[5],f=e[6]);let y;e[7]!==s||e[8]!==c||e[9]!==p?(y=g.jsxs("button",{ref:s,onClick:c,className:p,"aria-label":"Legende Ein- oder Ausschalten",children:[x,f]}),e[7]=s,e[8]=c,e[9]=p,e[10]=y):y=e[10];let _;e[11]!==n||e[12]!==t||e[13]!==h||e[14]!==u||e[15]!==o||e[16]!==l||e[17]!==i||e[18]!==a?(_=o&&g.jsxs("div",{ref:l,className:R("border z-[100000] absolute top-12 right-4 p-4 w-[calc(100%-2rem)] max-h-[60vh] overflow-y-auto md:w-auto md:max-w-lg",a==="dark"?"bg-black text-white":"bg-white text-black"),children:[g.jsx("button",{onClick:()=>i(!1),className:"absolute top-2 right-2 p-1","aria-label":"Legende schlieÃŸen",children:g.jsx(J,{className:"h-4 w-4"})}),g.jsx("h3",{className:"font-bold text-lg mb-2",children:"Legende"}),g.jsx("h4",{className:"text-[11px] mb-4 opacity-90",children:"Fotoserie via Farbe, Klick auf Galerie um zu verstecken oder einzublenden"}),g.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-2 text-sm",children:n.map(E=>g.jsxs("li",{className:`group flex items-center justify-between gap-2 cursor-pointer transition-opacity ${u.has(E.slug)?"opacity-50 hover:opacity-100":""}`,onClick:()=>h(E.slug),children:[g.jsxs("div",{className:"flex items-center gap-2 truncate",children:[g.jsx("div",{className:R(`w-3 h-3 min-w-3 min-h-3 flex-shrink-0 border ${t.get(E.slug)}`,a==="dark"?"border-white":"border-black")}),g.jsx("span",{className:"truncate text-xs",children:E.title})]}),g.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:u.has(E.slug)?g.jsx(me,{size:12}):g.jsx(J,{size:12})})]},E.slug))})]}),e[11]=n,e[12]=t,e[13]=h,e[14]=u,e[15]=o,e[16]=l,e[17]=i,e[18]=a,e[19]=_):_=e[19];let A;return e[20]!==y||e[21]!==_?(A=g.jsxs(g.Fragment,{children:[y,_]}),e[20]=y,e[21]=_,e[22]=A):A=e[22],A};function Le(r){return r.properties.cluster===!0}const Oe=()=>{const r=M.useRef(null),{theme:e}=ue(),[t,s]=M.useState(null),[i,o]=M.useState(!1),l=M.useRef(null),a=M.useRef(null),[n,u]=M.useState(new Set),[h,c]=M.useState(),[d]=he(),[p,x]=M.useState({longitude:16,latitude:48,zoom:3}),f=M.useMemo(()=>{const m=[];return P.forEach(b=>{n.has(b.slug)||b.images?.forEach((w,j)=>{w.latitude&&w.longitude&&m.push({image:{...w,index:j},gallery:b})})}),m},[n]),y=M.useMemo(()=>{const m=["bg-rose-300","bg-rose-200","bg-fuchsia-300","bg-fuchsia-200","bg-indigo-300","bg-indigo-200","bg-sky-300","bg-sky-200","bg-emerald-300","bg-emerald-200","bg-amber-300","bg-amber-200","bg-red-300","bg-red-200","bg-violet-300","bg-violet-200","bg-cyan-300","bg-cyan-200","bg-lime-300","bg-lime-200","bg-pink-300","bg-pink-200","bg-blue-300","bg-blue-200","bg-green-300","bg-green-200","bg-yellow-300","bg-yellow-200","bg-purple-300","bg-purple-200","bg-teal-300","bg-teal-200"],b=new Map;return P.forEach((w,j)=>{b.set(w.slug,m[j%m.length])}),b},[]),_=M.useMemo(()=>f.map(m=>({type:"Feature",properties:m,geometry:{type:"Point",coordinates:[m.image.longitude,m.image.latitude]}})),[f]);M.useEffect(()=>{if(t&&r.current){const m=r.current.getMap(),b=()=>{if(r.current){const w=m.getBounds();c(w?.toArray().flat())}m.off("idle",b)};m.on("idle",b)}},[t]),M.useEffect(()=>{const m=b=>{a.current&&!a.current.contains(b.target)&&l.current&&!l.current.contains(b.target)&&o(!1)};return i?document.addEventListener("mousedown",m):document.removeEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[i]);const{clusters:A,supercluster:E}=ve({points:_,bounds:h,zoom:p.zoom,options:{radius:75,maxZoom:11}}),F=M.useCallback(()=>{if(!r.current)return;const m=d.get("image"),b=d.get("gallery");if(m&&b){let w;const j=P.find(v=>v.slug===b);if(j){const v=j.images?.find(T=>Y(T.filename.replace(/\.[^/.]+$/,""))===m);v&&v.latitude&&v.longitude&&(w={image:v,gallery:j})}w&&w.image.latitude&&w.image.longitude&&(x({...p,latitude:w.image.latitude,longitude:w.image.longitude,zoom:15}),s(w))}else{if(f.length===0)return;if(f.length===1)x({longitude:f[0].image.longitude,latitude:f[0].image.latitude,zoom:10});else{const w=f.map(B=>B.image.longitude),j=f.map(B=>B.image.latitude),v=Math.min(...w),T=Math.max(...w),U=Math.min(...j),ae=Math.max(...j);r.current.fitBounds([[v,U],[T,ae]],{padding:80,duration:1e3})}}},[f,d]),I=M.useCallback(m=>{u(b=>{const w=new Set(b);return w.has(m)?w.delete(m):w.add(m),w})},[]);return g.jsxs("div",{className:"w-full h-full md:h-screen relative overflow-hidden",children:[g.jsx(ye,{title:`Foto Karte | ${$.meta.title}`,description:"Eine interaktive Karte mit allen Fotos, die Geodaten enthalten.",imageUrl:Q("all",P[0].images[0].filename.replaceAll(" ","_"),1440)}),g.jsx(Se,{galleryColors:y,legendToggleRef:a,setIsLegendOpen:o,isLegendOpen:i,legendRef:l,theme:e,galleries:P,hiddenGalleries:n,handleLegendToggle:I}),g.jsxs(pe,{...p,onMove:m=>{x(m.viewState),r.current&&c(r.current.getMap().getBounds()?.toArray().flat())},ref:r,style:{width:"100%",height:"100%"},mapStyle:e==="dark"?$.mapbox.style.dark:$.mapbox.style.light,mapboxAccessToken:$.mapbox.accessToken,onLoad:F,children:[A.map(m=>{const[b,w]=m.geometry.coordinates;if(Le(m)){const{point_count:v,cluster_id:T}=m.properties;return g.jsx(W,{latitude:w,longitude:b,children:g.jsx("div",{className:`shadow-[-2px_0px_0px_#00000033] -rotate-45 ${e==="dark"?"bg-white text-black":"bg-black text-white"} border flex items-center justify-center cursor-pointer`,style:{width:`${30+v/_.length*40}px`,height:`${30+v/_.length*40}px`},onClick:()=>{if(!E)return;const U=Math.min(E.getClusterExpansionZoom(T),20);x({...p,longitude:b,latitude:w,zoom:U})},children:g.jsx("span",{className:"rotate-45",children:v})})},`cluster-${T}`)}const j=m.properties;return g.jsx(W,{longitude:j.image.longitude,latitude:j.image.latitude,anchor:"center",onClick:v=>{v.originalEvent?.stopPropagation(),s(j)},children:g.jsx("div",{className:R(`shadow-[1px_1px_0px_#00000033] h-3 w-3 border ${y.get(j.gallery.slug)||"bg-gray-400"} ${e==="dark"?"border-white":"border-gray-800"}`)})},`marker-${j.image.filename}`)}),t&&g.jsx(ge,{anchor:"top",longitude:Number(t.image.longitude),latitude:Number(t.image.latitude),onClose:()=>s(null),closeButton:!1,className:"z-10 ",children:g.jsxs(de,{to:`/gallery/${t.gallery.slug}/image/${Y(t.image.filename.replace(/\.[^/.]+$/,""))}`,children:[g.jsxs("div",{className:"relative bg-[white] text-black",children:[g.jsx("div",{className:"relative group ",children:g.jsx("img",{className:"w-40 md:w-64 w-full h-auto",src:Q(t.gallery.slug,t.image.filename.replaceAll(" ","_"),380),alt:t.image.alt||t.image.filename.replaceAll("_"," ").replace(".jpg",""),loading:"lazy"})}),g.jsx("section",{className:"flex items-start justify-between gap-2",children:g.jsxs("div",{className:R("font-geist p-2 pt-4 text-base truncate"),children:[g.jsx("p",{className:"text-sm truncate",children:t.image.filename.replaceAll("_"," ").replace(".jpg","")}),g.jsx(fe,{to:`/gallery/${t.gallery.slug}`,className:"text-[11px] truncate !text-black",children:t.gallery.title})]})})]})," "]})})]})]})};export{Oe as default};
