import{d as Oe,r as b,c as Ze,b as Ue,e as De,g as _e,j as f,L as Be}from"./index-CedDT628.js";import{P as Ge,M as He,a as ve}from"./scale-control-DGa1sx2V.js";import"./mapbox-gl-CNTiHEyl.js";import{C as K}from"./config-BUEk0qKv.js";import{c as Se}from"./cn-CBfrqCZ4.js";import{g as ke}from"./image-CpkqAB9L.js";import{H as Ke}from"./Href-BJbPczUn.js";import{D as Ve}from"./download-di7g3pdy.js";import"./index-9pdLW68f.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ye=Oe("layers",Je);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],We=Oe("x",Qe),Ne=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],be=1,V=8;class je{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,n]=new Uint8Array(t,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const o=n>>4;if(o!==be)throw new Error(`Got v${o} data when expected v${be}.`);const i=Ne[n&15];if(!i)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(t,2,1),[l]=new Uint32Array(t,4,1);return new je(l,a,i,t)}constructor(t,s=64,n=Float64Array,o){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const i=Ne.indexOf(this.ArrayType),a=t*2*this.ArrayType.BYTES_PER_ELEMENT,l=t*this.IndexArrayType.BYTES_PER_ELEMENT,r=(8-l%8)%8;if(i<0)throw new Error(`Unexpected typed array class: ${n}.`);o&&o instanceof ArrayBuffer?(this.data=o,this.ids=new this.IndexArrayType(this.data,V,t),this.coords=new this.ArrayType(this.data,V+l+r,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(V+a+l+r),this.ids=new this.IndexArrayType(this.data,V,t),this.coords=new this.ArrayType(this.data,V+l+r,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(be<<4)+i]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=t)}add(t,s){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=s,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Ee(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,s,n,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:a,nodeSize:l}=this,r=[0,i.length-1,0],u=[];for(;r.length;){const h=r.pop()||0,c=r.pop()||0,p=r.pop()||0;if(c-p<=l){for(let d=p;d<=c;d++){const w=a[2*d],M=a[2*d+1];w>=t&&w<=n&&M>=s&&M<=o&&u.push(i[d])}continue}const g=p+c>>1,y=a[2*g],x=a[2*g+1];y>=t&&y<=n&&x>=s&&x<=o&&u.push(i[g]),(h===0?t<=y:s<=x)&&(r.push(p),r.push(g-1),r.push(1-h)),(h===0?n>=y:o>=x)&&(r.push(g+1),r.push(c),r.push(1-h))}return u}within(t,s,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:o,coords:i,nodeSize:a}=this,l=[0,o.length-1,0],r=[],u=n*n;for(;l.length;){const h=l.pop()||0,c=l.pop()||0,p=l.pop()||0;if(c-p<=a){for(let d=p;d<=c;d++)Te(i[2*d],i[2*d+1],t,s)<=u&&r.push(o[d]);continue}const g=p+c>>1,y=i[2*g],x=i[2*g+1];Te(y,x,t,s)<=u&&r.push(o[g]),(h===0?t-n<=y:s-n<=x)&&(l.push(p),l.push(g-1),l.push(1-h)),(h===0?t+n>=y:s+n>=x)&&(l.push(g+1),l.push(c),l.push(1-h))}return r}}function Ee(e,t,s,n,o,i){if(o-n<=s)return;const a=n+o>>1;$e(e,t,a,n,o,i),Ee(e,t,s,n,a-1,1-i),Ee(e,t,s,a+1,o,1-i)}function $e(e,t,s,n,o,i){for(;o>n;){if(o-n>600){const u=o-n+1,h=s-n+1,c=Math.log(u),p=.5*Math.exp(2*c/3),g=.5*Math.sqrt(c*p*(u-p)/u)*(h-u/2<0?-1:1),y=Math.max(n,Math.floor(s-h*p/u+g)),x=Math.min(o,Math.floor(s+(u-h)*p/u+g));$e(e,t,s,y,x,i)}const a=t[2*s+i];let l=n,r=o;for(J(e,t,n,s),t[2*o+i]>a&&J(e,t,n,o);l<r;){for(J(e,t,l,r),l++,r--;t[2*l+i]<a;)l++;for(;t[2*r+i]>a;)r--}t[2*n+i]===a?J(e,t,n,r):(r++,J(e,t,r,o)),r<=s&&(n=r+1),s<=r&&(o=r-1)}}function J(e,t,s,n){Me(e,s,n),Me(t,2*s,2*n),Me(t,2*s+1,2*n+1)}function Me(e,t,s){const n=e[t];e[t]=e[s],e[s]=n}function Te(e,t,s,n){const o=e-s,i=t-n;return o*o+i*i}const qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},Le=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1)),I=2,N=3,Ae=4,k=5,Fe=6;class Xe{constructor(t){this.options=Object.assign(Object.create(qe),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(t){const{log:s,minZoom:n,maxZoom:o}=this.options;s&&console.time("total time");const i=`prepare ${t.length} points`;s&&console.time(i),this.points=t;const a=[];for(let r=0;r<t.length;r++){const u=t[r];if(!u.geometry)continue;const[h,c]=u.geometry.coordinates,p=Le(de(h)),g=Le(fe(c));a.push(p,g,1/0,r,-1,1),this.options.reduce&&a.push(0)}let l=this.trees[o+1]=this._createTree(a);s&&console.timeEnd(i);for(let r=o;r>=n;r--){const u=+Date.now();l=this.trees[r]=this._createTree(this._cluster(l,r)),s&&console.log("z%d: %d clusters in %dms",r,l.numItems,+Date.now()-u)}return s&&console.timeEnd("total time"),this}getClusters(t,s){let n=((t[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,t[1]));let i=t[2]===180?180:((t[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){const c=this.getClusters([n,o,180,a],s),p=this.getClusters([-180,o,i,a],s);return c.concat(p)}const l=this.trees[this._limitZoom(s)],r=l.range(de(n),fe(a),de(i),fe(o)),u=l.data,h=[];for(const c of r){const p=this.stride*c;h.push(u[p+k]>1?Pe(u,p,this.clusterProps):this.points[u[p+N]])}return h}getChildren(t){const s=this._getOriginId(t),n=this._getOriginZoom(t),o="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(o);const a=i.data;if(s*this.stride>=a.length)throw new Error(o);const l=this.options.radius/(this.options.extent*Math.pow(2,n-1)),r=a[s*this.stride],u=a[s*this.stride+1],h=i.within(r,u,l),c=[];for(const p of h){const g=p*this.stride;a[g+Ae]===t&&c.push(a[g+k]>1?Pe(a,g,this.clusterProps):this.points[a[g+N]])}if(c.length===0)throw new Error(o);return c}getLeaves(t,s,n){s=s||10,n=n||0;const o=[];return this._appendLeaves(o,t,s,n,0),o}getTile(t,s,n){const o=this.trees[this._limitZoom(t)],i=Math.pow(2,t),{extent:a,radius:l}=this.options,r=l/a,u=(n-r)/i,h=(n+1+r)/i,c={features:[]};return this._addTileFeatures(o.range((s-r)/i,u,(s+1+r)/i,h),o.data,s,n,i,c),s===0&&this._addTileFeatures(o.range(1-r/i,u,1,h),o.data,i,n,i,c),s===i-1&&this._addTileFeatures(o.range(0,u,r/i,h),o.data,-1,n,i,c),c.features.length?c:null}getClusterExpansionZoom(t){let s=this._getOriginZoom(t)-1;for(;s<=this.options.maxZoom;){const n=this.getChildren(t);if(s++,n.length!==1)break;t=n[0].properties.cluster_id}return s}_appendLeaves(t,s,n,o,i){const a=this.getChildren(s);for(const l of a){const r=l.properties;if(r&&r.cluster?i+r.point_count<=o?i+=r.point_count:i=this._appendLeaves(t,r.cluster_id,n,o,i):i<o?i++:t.push(l),t.length===n)break}return i}_createTree(t){const s=new je(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<t.length;n+=this.stride)s.add(t[n],t[n+1]);return s.finish(),s.data=t,s}_addTileFeatures(t,s,n,o,i,a){for(const l of t){const r=l*this.stride,u=s[r+k]>1;let h,c,p;if(u)h=Re(s,r,this.clusterProps),c=s[r],p=s[r+1];else{const x=this.points[s[r+N]];h=x.properties;const[d,w]=x.geometry.coordinates;c=de(d),p=fe(w)}const g={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(p*i-o))]],tags:h};let y;u||this.options.generateId?y=s[r+N]:y=this.points[s[r+N]].id,y!==void 0&&(g.id=y),a.features.push(g)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,s){const{radius:n,extent:o,reduce:i,minPoints:a}=this.options,l=n/(o*Math.pow(2,s)),r=t.data,u=[],h=this.stride;for(let c=0;c<r.length;c+=h){if(r[c+I]<=s)continue;r[c+I]=s;const p=r[c],g=r[c+1],y=t.within(r[c],r[c+1],l),x=r[c+k];let d=x;for(const w of y){const M=w*h;r[M+I]>s&&(d+=r[M+k])}if(d>x&&d>=a){let w=p*x,M=g*x,E,A=-1;const O=((c/h|0)<<5)+(s+1)+this.points.length;for(const T of y){const v=T*h;if(r[v+I]<=s)continue;r[v+I]=s;const B=r[v+k];w+=r[v]*B,M+=r[v+1]*B,r[v+Ae]=O,i&&(E||(E=this._map(r,c,!0),A=this.clusterProps.length,this.clusterProps.push(E)),i(E,this._map(r,v)))}r[c+Ae]=O,u.push(w/d,M/d,1/0,O,-1,d),i&&u.push(A)}else{for(let w=0;w<h;w++)u.push(r[c+w]);if(d>1)for(const w of y){const M=w*h;if(!(r[M+I]<=s)){r[M+I]=s;for(let E=0;E<h;E++)u.push(r[M+E])}}}}return u}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,s,n){if(t[s+k]>1){const a=this.clusterProps[t[s+Fe]];return n?Object.assign({},a):a}const o=this.points[t[s+N]].properties,i=this.options.map(o);return n&&i===o?Object.assign({},i):i}}function Pe(e,t,s){return{type:"Feature",id:e[t+N],properties:Re(e,t,s),geometry:{type:"Point",coordinates:[et(e[t]),tt(e[t+1])]}}}function Re(e,t,s){const n=e[t+k],o=n>=1e4?`${Math.round(n/1e3)}k`:n>=1e3?`${Math.round(n/100)/10}k`:n,i=e[t+Fe],a=i===-1?{}:Object.assign({},s[i]);return Object.assign(a,{cluster:!0,cluster_id:e[t+N],point_count:n,point_count_abbreviated:o})}function de(e){return e/360+.5}function fe(e){const t=Math.sin(e*Math.PI/180),s=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return s<0?0:s>1?1:s}function et(e){return(e-.5)*360}function tt(e){const t=(180-e*360)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}var Ie=Object.prototype.hasOwnProperty;function Ce(e,t,s){for(s of e.keys())if(C(s,t))return s}function C(e,t){var s,n,o;if(e===t)return!0;if(e&&t&&(s=e.constructor)===t.constructor){if(s===Date)return e.getTime()===t.getTime();if(s===RegExp)return e.toString()===t.toString();if(s===Array){if((n=e.length)===t.length)for(;n--&&C(e[n],t[n]););return n===-1}if(s===Set){if(e.size!==t.size)return!1;for(n of e)if(o=n,o&&typeof o=="object"&&(o=Ce(t,o),!o)||!t.has(o))return!1;return!0}if(s===Map){if(e.size!==t.size)return!1;for(n of e)if(o=n[0],o&&typeof o=="object"&&(o=Ce(t,o),!o)||!C(n[1],t.get(o)))return!1;return!0}if(s===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(s===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return n===-1}if(!s||typeof e=="object"){n=0;for(s in e)if(Ie.call(e,s)&&++n&&!Ie.call(t,s)||!(s in t)||!C(e[s],t[s]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}function st(e){var t=b.useRef(e),s=b.useRef(0);return C(e,t.current)||(t.current=e,s.current+=1),b.useMemo(function(){return t.current},[s.current])}function nt(e,t){return b.useEffect(e,st(t))}var rt=function(t){var s=t.points,n=t.bounds,o=t.zoom,i=t.options,a=t.disableRefresh,l=b.useRef(),r=b.useRef(),u=b.useState([]),h=u[0],c=u[1],p=Math.round(o);return nt(function(){a!==!0&&((!l.current||!C(r.current,s)||!C(l.current.options,i))&&(l.current=new Xe(i),l.current.load(s)),n&&c(l.current.getClusters(n,p)),r.current=s)},[s,n,p,i,a]),{clusters:h,supercluster:l.current}};function it(e){return e.properties.cluster===!0}const bt=()=>{const e=Ze.c(59),t=b.useRef(null),{theme:s}=Ue(),[n,o]=b.useState(null),[i,a]=b.useState(!1),l=b.useRef(null),r=b.useRef(null);let u;e[0]===Symbol.for("react.memo_cache_sentinel")?(u=new Set,e[0]=u):u=e[0];const[h,c]=b.useState(u),[p,g]=b.useState(),[y]=De();let x;e[1]===Symbol.for("react.memo_cache_sentinel")?(x={longitude:16,latitude:48,zoom:3},e[1]=x):x=e[1];const[d,w]=b.useState(x);let M,E;e[2]!==h?(E=[],_e.forEach(m=>{h.has(m.slug)||m.images?.forEach((_,j)=>{_.latitude&&_.longitude&&E.push({image:{..._,index:j},gallery:m})})}),e[2]=h,e[3]=E):E=e[3],M=E;const A=M;let O,T;if(e[4]===Symbol.for("react.memo_cache_sentinel")){const m=["bg-rose-300","bg-fuchsia-300","bg-indigo-300","bg-sky-300","bg-emerald-300","bg-amber-300","bg-red-300","bg-violet-300","bg-cyan-300","bg-lime-300","bg-pink-300","bg-blue-300","bg-green-300","bg-yellow-300","bg-purple-300","bg-teal-300"];T=new Map,_e.forEach((_,j)=>{T.set(_.slug,m[j%m.length])}),e[4]=T}else T=e[4];O=T;const v=O;let B,Y;e[5]!==A?(Y=A.map(ot),e[5]=A,e[6]=Y):Y=e[6],B=Y;const S=B;let Q,W;e[7]!==i?(Q=()=>{const m=_=>{r.current&&!r.current.contains(_.target)&&l.current&&!l.current.contains(_.target)&&a(!1)};return i?document.addEventListener("mousedown",m):document.removeEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},W=[i],e[7]=i,e[8]=Q,e[9]=W):(Q=e[8],W=e[9]),b.useEffect(Q,W);let q;e[10]===Symbol.for("react.memo_cache_sentinel")?(q=[],e[10]=q):q=e[10],b.useEffect(lt,q);let X;e[11]===Symbol.for("react.memo_cache_sentinel")?(X={radius:75,maxZoom:13},e[11]=X):X=e[11];let ee;e[12]!==p||e[13]!==S||e[14]!==d.zoom?(ee={points:S,bounds:p,zoom:d.zoom,options:X},e[12]=p,e[13]=S,e[14]=d.zoom,e[15]=ee):ee=e[15];const{clusters:me,supercluster:$}=rt(ee);let te;e[16]!==A||e[17]!==y?(te=()=>{if(!t.current)return;const m=y.get("gallery"),_=y.get("image");if(m&&_){const pe=A.find(H=>H.gallery.slug===m&&H.image.filename===_);if(pe){o(pe),w({longitude:pe.image.longitude,latitude:pe.image.latitude,zoom:14}),setTimeout(()=>{if(t.current){const H=t.current.getMap().getBounds();H&&g(H.toArray().flat())}},50);return}}if(A.length===0)return;if(A.length===1){w({longitude:A[0].image.longitude,latitude:A[0].image.latitude,zoom:10});return}const j=A.map(ct),G=A.map(ut),L=Math.min(...j),P=Math.max(...j),he=Math.min(...G),we=Math.max(...G);t.current.fitBounds([[L,he],[P,we]],{padding:80,duration:1e3})},e[16]=A,e[17]=y,e[18]=te):te=e[18];const ge=te;let se;e[19]===Symbol.for("react.memo_cache_sentinel")?(se=m=>{c(_=>{const j=new Set(_);return j.has(m)?j.delete(m):j.add(m),j})},e[19]=se):se=e[19];const ze=se;let ne,re,ie;e[20]===Symbol.for("react.memo_cache_sentinel")?(ne=f.jsx("title",{children:`Foto Karte | ${K.meta.title}`}),re=f.jsx("meta",{name:"title",content:`Foto Karte | ${K.meta.title}`}),ie=f.jsx("meta",{name:"description",content:"Karte aller geotagten Fotos."}),e[20]=ne,e[21]=re,e[22]=ie):(ne=e[20],re=e[21],ie=e[22]);let F;e[23]!==i?(F=()=>a(!i),e[23]=i,e[24]=F):F=e[24];const ye=`flex gap-2 items-center absolute top-4 md:top-auto left-4 md:left-auto bottom-auto md:bottom-4 right-auto md:right-4 z-10 p-2 border shadow-[2px_2px_0px_#00000033] transition-colors ${s==="dark"?"bg-black text-white ":"bg-white text-black"}`;let oe,ae;e[25]===Symbol.for("react.memo_cache_sentinel")?(oe=f.jsx("span",{className:"text-xs ml-2",children:"Legende"}),ae=f.jsx(Ye,{size:20}),e[25]=oe,e[26]=ae):(oe=e[25],ae=e[26]);let R;e[27]!==F||e[28]!==ye?(R=f.jsxs("button",{ref:r,onClick:F,className:ye,"aria-label":"Legende Ein- oder Ausschalten",children:[oe,ae]}),e[27]=F,e[28]=ye,e[29]=R):R=e[29];let z;e[30]!==h||e[31]!==i||e[32]!==s?(z=i&&f.jsxs("div",{ref:l,className:`absolute top-16 md:top-auto left-4 md:left-auto bottom-auto md:bottom-16 right-auto md:right-4 z-50 px-3 pb-3 py-2 border shadow-[2px_2px_0px_#00000033] w-full max-w-[calc(100%-2rem)] md:max-w-xl ${s==="dark"?"bg-black/90 backdrop-blur-sm text-white":"bg-white/90 backdrop-blur-sm text-black"}`,children:[f.jsx("button",{onClick:()=>a(!1),className:"absolute top-2 right-2 p-1 text-gray-500 hover:text-gray-800 dark:hover:text-gray-200","aria-label":"Close legend",children:f.jsx(We,{className:"h-4 w-4"})}),f.jsx("h3",{className:"font-bold text-lg mb-2",children:"Legende"}),f.jsx("h4",{className:"text-xs mb-4",children:"Galerien via Farbe, Klick auf Galerie um zu verstecken oder einzublenden"}),f.jsx("ul",{className:"grid grid-cols-2 md:grid-cols-3 gap-x-6 gap-y-2 text-sm",children:_e.map(m=>f.jsxs("li",{className:`flex items-center cursor-pointer transition-opacity hover:opacity-60 ${h.has(m.slug)?"opacity-50":"opacity-100"}`,onClick:()=>ze(m.slug),children:[f.jsx("span",{className:`w-4 h-4 mr-1.5 border flex-shrink-0 ${s==="dark"?"border-gray-200":"border-gray-800"} ${v.get(m.slug)}`}),f.jsx("span",{className:"truncate text-xs",children:m.title})]},m.slug))})]}),e[30]=h,e[31]=i,e[32]=s,e[33]=z):z=e[33];let le;e[34]===Symbol.for("react.memo_cache_sentinel")?(le=m=>{w(m.viewState),t.current&&g(t.current.getMap().getBounds()?.toArray().flat())},e[34]=le):le=e[34];let ce;e[35]===Symbol.for("react.memo_cache_sentinel")?(ce={width:"100%",height:"100%"},e[35]=ce):ce=e[35];const xe=s==="dark"?K.mapbox.style.dark:K.mapbox.style.light;let Z;if(e[36]!==me||e[37]!==S||e[38]!==$||e[39]!==s||e[40]!==d){let m;e[42]!==S||e[43]!==$||e[44]!==s||e[45]!==d?(m=_=>{const[j,G]=_.geometry.coordinates;if(it(_)){const{point_count:P,cluster_id:he}=_.properties;return f.jsx(ve,{latitude:G,longitude:j,children:f.jsx("div",{className:`shadow-[-2px_0px_0px_#00000033] -rotate-45 ${s==="dark"?"bg-white text-black":"bg-black text-white"} border flex items-center justify-center cursor-pointer`,style:{width:`${30+P/S.length*40}px`,height:`${30+P/S.length*40}px`},onClick:()=>{if(!$)return;const we=Math.min($.getClusterExpansionZoom(he),20);w({...d,longitude:j,latitude:G,zoom:we})},children:f.jsx("span",{className:"rotate-45",children:P})})},` cluster-${he}`)}const L=_.properties;return f.jsx(ve,{longitude:L.image.longitude,latitude:L.image.latitude,anchor:"center",onClick:P=>{P.originalEvent?.stopPropagation(),o(L)},children:f.jsx("div",{className:Se(`shadow-[1px_1px_0px_#00000033] h-3 w-3 border ${v.get(L.gallery.slug)||"bg-gray-400"} ${s==="dark"?"border-white":"border-gray-800"}`)})},`marker-${L.image.filename}`)},e[42]=S,e[43]=$,e[44]=s,e[45]=d,e[46]=m):m=e[46],Z=me.map(m),e[36]=me,e[37]=S,e[38]=$,e[39]=s,e[40]=d,e[41]=Z}else Z=e[41];let U;e[47]!==n?(U=n&&f.jsx(Ge,{anchor:"top",longitude:Number(n.image.longitude),latitude:Number(n.image.latitude),onClose:()=>o(null),closeButton:!1,className:"z-10",children:f.jsxs("div",{className:"relative bg-white text-black",children:[f.jsx("div",{className:"relative group ",children:f.jsx(Be,{to:`/image/${n.image.filename.replace(/\.[^/.]+$/,"")}`,children:f.jsx("img",{className:"w-40 md:w-64 w-full h-auto",src:ke(n.gallery.slug,n.image.filename.replaceAll(" ","_"),640),alt:n.image.alt||n.image.filename.replaceAll("_"," ").replace(".jpg",""),loading:"lazy"})})}),f.jsxs("section",{className:"flex items-start justify-between gap-2",children:[f.jsxs("div",{className:Se("font-geist p-2 text-base truncate"),children:[f.jsx("p",{className:"truncate",children:n.image.filename.replaceAll("_"," ")}),f.jsx("p",{className:"text-sm truncate",children:n.gallery.title})]}),f.jsx(Ke,{href:ke(n.gallery.slug,n.image.filename.replaceAll(" ","_"),"original"),download:!0,onClick:ht,className:"p-2 px-3 mt-1 text-black","aria-label":`Download ${n.image.filename}`,children:f.jsx(Ve,{size:16})})]})]})}),e[47]=n,e[48]=U):U=e[48];let D;e[49]!==ge||e[50]!==xe||e[51]!==Z||e[52]!==U||e[53]!==d?(D=f.jsxs(He,{...d,onMove:le,ref:t,style:ce,mapStyle:xe,mapboxAccessToken:K.mapbox.accessToken,onLoad:ge,children:[Z,U]}),e[49]=ge,e[50]=xe,e[51]=Z,e[52]=U,e[53]=d,e[54]=D):D=e[54];let ue;return e[55]!==R||e[56]!==z||e[57]!==D?(ue=f.jsxs("div",{className:"w-full h-screen relative overflow-hidden",children:[ne,re,ie,R,z,D]}),e[55]=R,e[56]=z,e[57]=D,e[58]=ue):ue=e[58],ue};function ot(e){return{type:"Feature",properties:e,geometry:{type:"Point",coordinates:[e.image.longitude,e.image.latitude]}}}function at(){document.body.style.overflow="auto"}function lt(){return document.body.style.overflow="hidden",at}function ct(e){return e.image.longitude}function ut(e){return e.image.latitude}function ht(e){return e.stopPropagation()}export{bt as default};
