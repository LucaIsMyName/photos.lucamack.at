import{c as L,r as N,s as b,b as f,j as a,L as T,u as k,d as D,g as M,e as O,C as r,p as F}from"./index-BDTGdGlU.js";import{k as A}from"./marked.esm-DJbTXz-_.js";import{I as P}from"./Image-Cc8bg_BU.js";import{C as U}from"./CopyButton-B7qmbjEW.js";import E from"./NotFoundPage-DKURrjDU.js";import"./mapbox-gl-CNTiHEyl.js";import"./check-C2s2JsUF.js";import"./Href-DDDWNMyL.js";const R=x=>{const t=L.c(19),{alt:e,gallerySlug:i,imageFilename:c}=x,[n,o]=N.useState(null);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=u=>{u.width>u.height?o("landscape"):u.height>u.width?o("portrait"):o("square")},t[0]=s):s=t[0];const m=s;let l;t[1]!==n?(l=()=>{if(!n)return"w-full md:w-1/2 flex-grow-1 max-w-[calc(var(--content-width)/1.5)]";switch(n){case"landscape":return"w-full md:w-full";case"portrait":case"square":default:return"w-full md:w-1/2 flex-grow-1 max-w-[calc(var(--content-width)/1.5)]"}},t[1]=n,t[2]=l):l=t[2];const C=l,w=n==="landscape"?"(min-width: 1024px) 1024px, 100vw":"(min-width: 1024px) 512px, (min-width: 768px) 50vw, 100vw",S=c.replace(/\.[^/.]+$/,""),j=`/gallery/${i}/image/${b(S)}`,y=`${b(S)}`,I=C(),$=`Link zum Foto: ${e}`;let d;t[3]!==i||t[4]!==c?(d=f(i,c),t[3]=i,t[4]=c,t[5]=d):d=t[5];const v=n==="landscape"?427:n==="portrait"?960:640;let p;t[6]!==e||t[7]!==w||t[8]!==d||t[9]!==v?(p=a.jsx(P,{src:d,alt:e,width:640,height:v,onImageLoad:m,sizes:w,loading:"lazy",className:"w-full h-auto block"}),t[6]=e,t[7]=w,t[8]=d,t[9]=v,t[10]=p):p=t[10];let g;t[11]!==j||t[12]!==$||t[13]!==p?(g=a.jsx("div",{className:"p-0 pr-0 lg:pr-4 sm:pb-4 md:pr-4 md:py-6",children:a.jsx(T,{title:$,to:j,className:"block",children:p})}),t[11]=j,t[12]=$,t[13]=p,t[14]=g):g=t[14];let h;return t[15]!==y||t[16]!==I||t[17]!==g?(h=a.jsx("div",{id:y,className:I,children:g}),t[15]=y,t[16]=I,t[17]=g,t[18]=h):h=t[18],h},W=()=>{const{theme:x}=k(),{slug:t}=D(),e=M.find(n=>n.slug===t),i=O(),c=N.useMemo(()=>e?.images?[...e.images].sort(()=>Math.random()-.5):[],[e]);return N.useEffect(()=>{let o=new URLSearchParams(i.search).get("image");if(!o&&i.hash){const s=i.hash.substring(1);o=s.startsWith("image-")?s.replace("image-",""):s}if(o){const s=`image-${o.split(".")[0]}`;setTimeout(()=>{const m=document.getElementById(s);m&&m.scrollIntoView({behavior:"smooth",block:"center"})},150)}if(e&&e.images){const s=document.createElement("script");s.type="application/ld+json",s.id="gallery-structured-data";const m=e.images.filter(l=>l.latitude&&l.longitude).map(l=>({"@context":"https://schema.org","@type":"ImageObject",name:l.filename.replaceAll("_"," ").replace(".jpg","").trim(),description:`A photo from the gallery: ${e.title}`,contentUrl:`${r.url}${f(e.slug,encodeURI(l.filename.replaceAll(" ","_")),"original")}`,width:"1920",height:"1080",datePublished:l.createDate?F(l.createDate)?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]:new Date().toISOString().split("T")[0],dateCreated:l.createDate?F(l.createDate)?.toISOString().split("T")[0]||new Date().toISOString().split("T")[0]:new Date().toISOString().split("T")[0],author:{"@type":"Person",name:r.author,url:r.url},copyrightHolder:{"@type":"Person",name:r.author},license:"https://creativecommons.org/licenses/by-nc/4.0/",geo:{"@type":"GeoCoordinates",latitude:l.latitude,longitude:l.longitude},...l.googleMapsUrl&&{sameAs:l.googleMapsUrl}}));return s.innerHTML=JSON.stringify(m),document.head.appendChild(s),()=>{const l=document.getElementById("gallery-structured-data");l&&document.head.removeChild(l)}}},[i,e]),e?a.jsxs("div",{children:[a.jsx("title",{children:`Fotoserie: ${e.title||e.name} | ${r.meta.title}`}),a.jsx("meta",{name:"description",content:e.description||`Fotoserie: ${e.title||e.name}.`}),a.jsx("meta",{name:"title",content:`Fotoserie: ${e.title||e.name}`}),a.jsx("meta",{name:"image",content:`${r.url}${f(e.slug,encodeURI(e.images[Math.floor(Math.random()*e.images.length)].filename.replaceAll(" ","_")),1440)}`}),a.jsx("meta",{name:"og:image",content:`${r.url}${f(e.slug,encodeURI(e.images[Math.floor(Math.random()*e.images.length)].filename.replaceAll(" ","_")),1440)}`}),a.jsx("meta",{name:"og:title",content:`Fotoserie: ${e.title||e.name}`}),a.jsx("meta",{name:"og:description",content:e.description||`Fotoserie: ${e.title||e.name}.`}),a.jsx("meta",{name:"og:type",content:"website"}),a.jsxs("div",{className:"px-4  md:pl-8 md:px-0",children:[a.jsxs("div",{className:"flex flex-col items-start",children:[a.jsx("h1",{className:`${r.theme.headline.one} w-full max-w-[calc(var(--content-width)/(21/13))] text-wrap-balance md:pt-8 pt-6 pb-4  `,children:e.title||e.name}),e.description&&a.jsx("div",{className:"w-full max-w-[calc(var(--content-width)/(21/13))] text-wrap-balance text-sm md:text-lg leading-8 my-4 pb-4 leading-tight",dangerouslySetInnerHTML:{__html:A(e.description)}})]}),c.length>0?a.jsx("div",{className:"md:max-w-[calc(var(--content-width))] lg:pr-4 flex flex-wrap justify-center items-center gap-8 md:gap-0 pb-4",children:c.map(n=>a.jsx(R,{alt:`${n.filename.replaceAll("_"," ").replace(".jpg","").trim()}`,gallerySlug:e.slug,imageFilename:n.filename},n.filename))}):a.jsx("p",{className:"text-left",children:"Keine Fotos in der Serie gefunden"}),a.jsxs("div",{className:"md:max-w-[calc(var(--content-width))] w-full gap-4 my-8 py-8 flex flex-col justify-between items-center text-sm",children:[e.timeframe||e.imageCount?a.jsxs("div",{className:"text-left flex justify-center gap-4 w-full",children:[e.timeframe?a.jsxs("p",{children:[e.timeframe," "]}):a.jsx("p",{children:"N/A"})," | ",e.imageCount?a.jsxs("p",{children:[e.imageCount," Fotos"]}):a.jsx("p",{children:"N/A"})]}):null,a.jsx("div",{className:"flex justify-center",children:a.jsx(U,{textToCopy:window.location.href,children:a.jsx("span",{className:`font-mono ${x==="dark"?"text-white":"text-black"}`,children:"Link Kopieren"})})})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("title",{children:["Fotoserien nicht gefunden | ",r.meta.title]}),a.jsx("meta",{name:"description",content:"Fotoserie nicht gefunden"}),a.jsx(E,{})]})};export{W as default};
