import{r as h,c as q,b as D,j as O}from"./index-ComToKcm.js";import{g as G}from"./image-CpkqAB9L.js";import{c as J}from"./cn-CBfrqCZ4.js";var C=new Map,z=new WeakMap,F=0,K=void 0;function P(t){return t?(z.has(t)||(F+=1,z.set(t,F.toString())),z.get(t)):"0"}function Q(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?P(t.root):t[e]}`).toString()}function X(t){const e=Q(t);let o=C.get(e);if(!o){const s=new Map;let g;const a=new IntersectionObserver(l=>{l.forEach(r=>{var n;const m=r.isIntersecting&&g.some(c=>r.intersectionRatio>=c);t.trackVisibility&&typeof r.isVisible>"u"&&(r.isVisible=m),(n=s.get(r.target))==null||n.forEach(c=>{c(m,r)})})},t);g=a.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),o={id:e,observer:a,elements:s},C.set(e,o)}return o}function Y(t,e,o={},s=K){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const n=t.getBoundingClientRect();return e(s,{isIntersecting:s,target:t,intersectionRatio:typeof o.threshold=="number"?o.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:g,observer:a,elements:l}=X(o),r=l.get(t)||[];return l.has(t)||l.set(t,r),r.push(e),a.observe(t),function(){r.splice(r.indexOf(e),1),r.length===0&&(l.delete(t),a.unobserve(t)),l.size===0&&(a.disconnect(),C.delete(g))}}function Z({threshold:t,delay:e,trackVisibility:o,rootMargin:s,root:g,triggerOnce:a,skip:l,initialInView:r,fallbackInView:n,onChange:m}={}){var c;const[u,x]=h.useState(null),$=h.useRef(m),[p,d]=h.useState({inView:!!r,entry:void 0});$.current=m,h.useEffect(()=>{if(l||!u)return;let f;return f=Y(u,(E,j)=>{d({inView:E,entry:j}),$.current&&$.current(E,j),j.isIntersecting&&a&&f&&(f(),f=void 0)},{root:g,rootMargin:s,threshold:t,trackVisibility:o,delay:e},n),()=>{f&&f()}},[Array.isArray(t)?t.toString():t,u,g,s,a,l,o,n,e]);const b=(c=p.entry)==null?void 0:c.target,y=h.useRef(void 0);!u&&b&&!a&&!l&&y.current!==b&&(y.current=b,d({inView:!!r,entry:void 0}));const v=[x,p.inView,p.entry];return v.ref=v[0],v.inView=v[1],v.entry=v[2],v}const k=[380,640,1440],ne=t=>{const e=q.c(36),{id:o,src:s,loading:g,alt:a,className:l,style:r,onImageLoad:n,sizes:m,width:c,height:u}=t,x=o===void 0?"":o,{theme:$}=D();let p;e[0]===Symbol.for("react.memo_cache_sentinel")?(p={triggerOnce:!0,threshold:.1},e[0]=p):p=e[0];const{ref:d,inView:b}=Z(p),[y,v]=h.useState(null),[f,E]=h.useState(null),[j,H]=h.useState(!1);let T;if(e[1]!==s){const i=s.split("/").pop()||"",w=s.split("/")[3];T=k.map(I=>`${G(w,i,I)} ${I}w`).join(", "),e[1]=s,e[2]=T}else T=e[2];const M=T;let _,L;if(e[3]!==b||e[4]!==s?(_=()=>b?((async()=>{try{v(s)}catch(w){console.error("Image loading or conversion failed:",w),E("Failed to load image.")}})(),ee):void 0,L=[s,b],e[3]=b,e[4]=s,e[5]=_,e[6]=L):(_=e[5],L=e[6]),h.useEffect(_,L),f){let i;return e[7]!==f||e[8]!==d?(i=O.jsx("div",{ref:d,className:"w-full aspect-[4/3] flex items-center justify-center bg-gray-200 text-red-500 font-medium",children:f}),e[7]=f,e[8]=d,e[9]=i):i=e[9],i}let N;e[10]!==n?(N=i=>{H(!0),n&&n({width:i.currentTarget.naturalWidth,height:i.currentTarget.naturalHeight})},e[10]=n,e[11]=N):N=e[11];const U=N;if(!y){let i;e[12]!==u||e[13]!==c?(i=c&&u?{aspectRatio:`${c} / ${u}`}:{aspectRatio:"4 / 3"},e[12]=u,e[13]=c,e[14]=i):i=e[14];const w=i,I=`w-full h-auto animate-pulse ${$==="dark"?"bg-black":"bg-white"}`;let S;e[15]!==I?(S=J(I),e[15]=I,e[16]=S):S=e[16];let A;return e[17]!==w||e[18]!==d||e[19]!==S?(A=O.jsx("div",{ref:d,style:w,className:S}),e[17]=w,e[18]=d,e[19]=S,e[20]=A):A=e[20],A}const B=g!==void 0?g:"lazy",W=`${l} transition-opacity duration-700 ease-in-out ${j?"opacity-100":"opacity-0"}`;let R;e[21]!==a||e[22]!==U||e[23]!==u||e[24]!==x||e[25]!==y||e[26]!==m||e[27]!==M||e[28]!==r||e[29]!==B||e[30]!==W||e[31]!==c?(R=O.jsx("img",{id:x,src:y,srcSet:M,sizes:m,alt:a,width:c,height:u,loading:B,className:W,style:r,onLoad:U}),e[21]=a,e[22]=U,e[23]=u,e[24]=x,e[25]=y,e[26]=m,e[27]=M,e[28]=r,e[29]=B,e[30]=W,e[31]=c,e[32]=R):R=e[32];let V;return e[33]!==d||e[34]!==R?(V=O.jsx("div",{ref:d,className:"w-full h-full",children:R}),e[33]=d,e[34]=R,e[35]=V):V=e[35],V};function ee(){}export{ne as I};
